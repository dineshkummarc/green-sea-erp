jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+m.path:"";var g=m.domain?"; domain="+m.domain:"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var c=a.data(this[0],"validator");if(c){return c}c=new a.validator(b,this[0]);a.data(this[0],"validator",c);return c},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var c=true;var b=a(this[0].form).validate();this.each(function(){c&=b.element(this)});return c}},removeAttrs:function(d){var b={},c=this;a.each(d.split(/\s/),function(e,f){b[f]=c.attr(f);c.removeAttr(f)});return b},rules:function(e,b){var g=this[0];if(e){var d=a.data(g.form,"validator").settings;var j=d.rules;var k=a.validator.staticRules(g);switch(e){case"add":a.extend(k,a.validator.normalizeRule(b));j[g.name]=k;if(b.messages){d.messages[g.name]=a.extend(d.messages[g.name],b.messages)}break;case"remove":if(!b){delete j[g.name];return k}var h={};a.each(b.split(/\s/),function(l,m){h[m]=k[m];delete k[m]});return h}}var f=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(g),a.validator.classRules(g),a.validator.attributeRules(g),a.validator.staticRules(g)),g);if(f.required){var c=f.required;delete f.required;f=a.extend({required:c},f)}return f}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+b.value)},filled:function(b){return !!a.trim(""+b.value)},unchecked:function(b){return !b.checked}});a.validator=function(b,c){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(arguments.length==1){return function(){var d=a.makeArray(arguments);d.unshift(b);return a.validator.format.apply(this,d)}}if(arguments.length>2&&c.constructor!=Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!=Array){c=[c]}a.each(c,function(d,e){b=b.replace(new RegExp("\\{"+d+"\\}","g"),e)});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(b){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass);this.errorsFor(b).hide()}},onfocusout:function(b){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}},onkeyup:function(b){if(b.name in this.submitted||b==this.lastElement){this.element(b)}},onclick:function(b){if(b.name in this.submitted){this.element(b)}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode)}}},highlight:function(d,b,c){a(d).addClass(b).removeClass(c)},unhighlight:function(d,b,c){a(d).removeClass(b).addClass(c)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=(this.groups={});a.each(this.settings.groups,function(e,f){a.each(f.split(/\s/),function(h,g){b[g]=e})});var d=this.settings.rules;a.each(d,function(e,f){d[e]=a.validator.normalizeRule(f)});function c(g){var f=a.data(this[0].form,"validator"),e="on"+g.type.replace(/^validate/,"");f.settings[e]&&f.settings[e].call(f,this[0])}a(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",c).validateDelegate(":radio, :checkbox, select, option","click",c);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var b=0,c=(this.currentElements=this.elements());c[b];b++){this.check(c[b])}return this.valid()},element:function(c){c=this.clean(c);this.lastElement=c;this.prepareElement(c);this.currentElements=a(c);var b=this.check(c);if(b){delete this.invalid[c.name]}else{this.invalid[c.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return b},showErrors:function(c){if(c){a.extend(this.errorMap,c);this.errorList=[];for(var b in c){this.errorList.push({message:c[b],element:this.findByName(b)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in c)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm()}this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var c=0;for(var b in d){c++}return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name==b.name}).length==1&&b},elements:function(){var c=this,b={};return a([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&c.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in b||!c.objectLength(a(this).rules())){return false}b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},check:function(c){c=this.clean(c);if(this.checkable(c)){var j=this.findByName(c.name);c=j[j.length-1]}var h=a(c).rules();var d=false;for(method in h){var g={method:method,parameters:h[method]};try{var b=a.validator.methods[method].call(this,c.value.replace(/\r/g,""),c,g.parameters);if(b=="dependency-mismatch"){d=true;continue}d=false;if(b=="pending"){this.toHide=this.toHide.not(this.errorsFor(c));return}if(!b){this.formatAndAdd(c,g);return false}}catch(f){this.settings.debug&&window.console&&console.log("exception occured when checking element "+c.id+", check the '"+g.method+"' method",f);throw f}}if(d){return}if(this.objectLength(h)){this.successList.push(c)}return true},customMetaMessage:function(b,d){if(!a.metadata){return}var c=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return c&&c.messages&&c.messages[d]},customMessage:function(c,d){var b=this.settings.messages[c];return b&&(b.constructor==String?b:b[d])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(c,e){var d=this.defaultMessage(c,e.method),b=/\$?\{(\d+)\}/g;if(typeof d=="function"){d=d.call(this,e.parameters,c)}else{if(b.test(d)){d=jQuery.format(d.replace(b,"{$1}"),e.parameters)}}this.errorList.push({message:d,element:c});this.errorMap[c.name]=d;this.submitted[c.name]=d},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){for(var c=0;this.errorList[c];c++){var b=this.errorList[c];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(var c=0;this.successList[c];c++){this.showLabel(this.successList[c])}}if(this.settings.unhighlight){for(var c=0,d=this.validElements();d[c];c++){this.settings.unhighlight.call(this,d[c],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);if(b.length){b.removeClass().addClass(this.settings.errorClass);b.attr("generated")&&b.html(d)}else{b=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(c),generated:true}).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper){b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(b).length){this.settings.errorPlacement?this.settings.errorPlacement(b,a(c)):b.insertAfter(c)}}if(!d&&this.settings.success){b.text("");typeof this.settings.success=="string"?b.addClass(this.settings.success):this.settings.success(b)}this.toShow=this.toShow.add(b)},errorsFor:function(c){var b=this.idOrName(c);return this.errors().filter(function(){return a(this).attr("for")==b})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},checkable:function(b){return/radio|checkbox/i.test(b.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(d,e){return e.form==c&&e.name==b&&e||null})},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length}}return c.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):true},dependTypes:{"boolean":function(c,b){return c},string:function(c,b){return !!a(c,b.form).length},"function":function(c,b){return c(b)}},optional:function(b){return !a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[b.name];if(c&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(c){var d={};var b=a(c).attr("class");b&&a.each(b.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(d,a.validator.classRuleSettings[this])}});return d},attributeRules:function(c){var e={};var b=a(c);for(method in a.validator.methods){var d=b.attr(method);if(d){e[method]=d}}if(e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)){delete e.maxlength}return e},metadataRules:function(b){if(!a.metadata){return{}}var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(c){var d={};var b=a.data(c.form,"validator");if(b.settings.rules){d=a.validator.normalizeRule(b.settings.rules[c.name])||{}}return d},normalizeRules:function(c,b){a.each(c,function(f,e){if(e===false){delete c[f];return}if(e.param||e.depends){var d=true;switch(typeof e.depends){case"string":d=!!a(e.depends,b.form).length;break;case"function":d=e.depends.call(b,b);break}if(d){c[f]=e.param!==undefined?e.param:true}else{delete c[f]}}});a.each(c,function(d,e){c[d]=a.isFunction(e)?e(b):e});a.each(["minlength","maxlength","min","max"],function(){if(c[this]){c[this]=Number(c[this])}});a.each(["rangelength","range"],function(){if(c[this]){c[this]=[Number(c[this][0]),Number(c[this][1])]}});if(a.validator.autoCreateRanges){if(c.min&&c.max){c.range=[c.min,c.max];delete c.min;delete c.max}if(c.minlength&&c.maxlength){c.rangelength=[c.minlength,c.maxlength];delete c.minlength;delete c.maxlength}}if(c.messages){delete c.messages}return c},normalizeRule:function(c){if(typeof c=="string"){var b={};a.each(c.split(/\s/),function(){b[this]=true});c=b}return c},addMethod:function(b,d,c){a.validator.methods[b]=d;a.validator.messages[b]=c!=undefined?c:a.validator.messages[b];if(d.length<3){a.validator.addClassRules(b,a.validator.normalizeRule(b))}},methods:{required:function(c,b,e){if(!this.depend(e,b)){return"dependency-mismatch"}switch(b.nodeName.toLowerCase()){case"select":var d=a(b).val();return d&&d.length>0;case"input":if(this.checkable(b)){return this.getLength(c,b)>0}default:return a.trim(c).length>0}},remote:function(f,c,g){if(this.optional(c)){return"dependency-mismatch"}var d=this.previousValue(c);if(!this.settings.messages[c.name]){this.settings.messages[c.name]={}}d.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=d.message;g=typeof g=="string"&&{url:g}||g;if(d.old!==f){d.old=f;var b=this;this.startRequest(c);var e={};e[c.name]=f;a.ajax(a.extend(true,{url:g,mode:"abort",port:"validate"+c.name,dataType:"json",data:e,success:function(j){b.settings.messages[c.name].remote=d.originalMessage;var l=j===true;if(l){var h=b.formSubmitted;b.prepareElement(c);b.formSubmitted=h;b.successList.push(c);b.showErrors()}else{var m={};var k=(d.message=j||b.defaultMessage(c,"remote"));m[c.name]=a.isFunction(k)?k(f):k;b.showErrors(m)}d.valid=l;b.stopRequest(c,l)}},g));return"pending"}else{if(this.pending[c.name]){return"pending"}}return d.valid},minlength:function(c,b,d){return this.optional(b)||this.getLength(a.trim(c),b)>=d},maxlength:function(c,b,d){return this.optional(b)||this.getLength(a.trim(c),b)<=d},rangelength:function(d,b,e){var c=this.getLength(a.trim(d),b);return this.optional(b)||(c>=e[0]&&c<=e[1])},min:function(c,b,d){return this.optional(b)||c>=d},max:function(c,b,d){return this.optional(b)||c<=d},range:function(c,b,d){return this.optional(b)||(c>=d[0]&&c<=d[1])},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(c))},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(c)},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},creditcard:function(f,c){if(this.optional(c)){return"dependency-mismatch"}if(/[^0-9-]+/.test(f)){return false}var g=0,e=0,b=false;f=f.replace(/\D/g,"");for(var h=f.length-1;h>=0;h--){var d=f.charAt(h);var e=parseInt(d,10);if(b){if((e*=2)>9){e-=9}}g+=e;b=!b}return(g%10)==0},accept:function(c,b,d){d=typeof d=="string"?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||c.match(new RegExp(".("+d+")$","i"))},equalTo:function(c,b,e){var d=a(e).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()});return c==d.val()}}});a.format=a.validator.format})(jQuery);(function(c){var b=c.ajax;var a={};c.ajax=function(e){e=c.extend(e,c.extend({},c.ajaxSettings,e));var d=e.port;if(e.mode=="abort"){if(a[d]){a[d].abort()}return(a[d]=b.apply(this,arguments))}return b.apply(this,arguments)}})(jQuery);(function(a){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){a.each({focus:"focusin",blur:"focusout"},function(c,b){a.event.special[b]={setup:function(){this.addEventListener(c,d,true)},teardown:function(){this.removeEventListener(c,d,true)},handler:function(f){arguments[0]=a.event.fix(f);arguments[0].type=b;return a.event.handle.apply(this,arguments)}};function d(f){f=a.event.fix(f);f.type=b;return a.event.handle.call(this,f)}})}a.extend(a.fn,{validateDelegate:function(d,c,b){return this.bind(c,function(e){var f=a(e.target);if(f.is(d)){return b.apply(f,arguments)}})}})})(jQuery);(function(a){a.fn.bgiframe=function(c){if(a.browser.msie&&/6.0/.test(navigator.userAgent)){c=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},c||{});var d=function(e){return e&&e.constructor==Number?e+"px":e},b='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+c.src+'"style="display:block;position:absolute;z-index:-1;'+(c.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(c.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":d(c.top))+";left:"+(c.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":d(c.left))+";width:"+(c.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":d(c.width))+";height:"+(c.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":d(c.height))+';"/>';return this.each(function(){if(a("> iframe.bgiframe",this).length==0){this.insertBefore(document.createElement(b),this.firstChild)}})}return this}})(jQuery);(function($){var allSelectBox=[];$.extend($.fn,{comboxSelect:function($box,options){var op=$.extend({selector:">a"},options);var killAllBox=function(bid){$.each(allSelectBox,function(i){if(allSelectBox[i]!=bid){if(!$("#"+allSelectBox[i])[0]){$("#op"+allSelectBox[i]).remove()}else{$("#op"+allSelectBox[i]).css({height:"",width:""}).hide()}}})};return this.each(function(){var box=$(this);var selector=$(op.selector,box);box.append('<input type="hidden" class="'+selector.attr("class")+'" name="'+selector.attr("name")+'" value="'+selector.attr("value")+'"/>').data("title",selector.text());allSelectBox.push(box.attr("id"));$(op.selector,box).click(function(){var options=$("#op"+box.attr("id"));if(options.is(":hidden")){if(options.height()>300){options.css({height:"300px",overflow:"scroll"});options.css("width",options.width()+20)}var top=box.offset().top+box[0].offsetHeight-50;if(top+options.height()>$(window).height()-20){top=$(window).height()-20-options.height()}options.css({top:top,left:box.offset().left}).show();killAllBox(box.attr("id"));$(document).click(killAllBox)}else{$(document).unbind("click",killAllBox);killAllBox()}return false});$("#op"+box.attr("id")).find(">li").comboxOption(selector,box)})},comboxOption:function(selector,box){selector.text(box.data("title"));return this.each(function(){$(">a",this).click(function(event){var $this=$(this);var property=$(":hidden",box);var param=box.attr("param");var rel=box.attr("rel");var args=(!rel&&param)?DWZ.jsonEval("{"+param+":"+$this.attr("value")+"}"):$this.attr("value");var isAjax=box.attr("isAjax");if(isAjax){var url=box.attr("url");$.ajax({url:url,type:"POST",data:{id:$this.attr("value")},dataType:"JSON",success:function(json){success(json)},error:DWZ.ajaxError})}else{change()}function change(){var change=eval(selector.attr("change"));if($.isFunction(change)){var options=false;options=change.call(selector[0],args);if(options==false){event.preventDefault();return false}if(rel){var html="";for(var i=0;i<options.length;i++){html+='<li><a href="#" value="'+options[i][0]+'">'+options[i][1]+"</a></li>"}var relObj=$(".combox").find(">div[name='"+rel+"']");options=$("#op"+relObj.attr("id")).html(html);$(">li",options).comboxOption($(">a",relObj),relObj);$(">li>a:first",options).trigger("click")}}$this.parent().parent().find(".selected").removeClass("selected");$this.addClass("selected");selector.text($this.text());property.attr("value",$this.attr("value"));event.preventDefault()}function success(json){if(isAjax){var options=false;var result=new Array();result.push(["0","请选择"]);var json=$.parseJSON(json);if(json.status!=0){for(i=0;i<json.length;i++){result.push([json[i].id,json[i].name])}}options=result;if(options==false){event.preventDefault();return false}if(rel){var html="";for(var i=0;i<options.length;i++){html+='<li><a href="#" value="'+options[i][0]+'">'+options[i][1]+"</a></li>"}var relObj=$(".combox").find(">div[name='"+rel+"']");options=$("#op"+relObj.attr("id")).html(html);$(">li",options).comboxOption($(">a",relObj),relObj);$(">li>a:first",options).trigger("click")}}$this.parent().parent().find(".selected").removeClass("selected");$this.addClass("selected");selector.text($this.text());property.attr("value",$this.attr("value"));event.preventDefault()}})});box.removeData("title")},combox:function(){return this.each(function(){var $this=$(this).removeClass("combox");var name=$this.attr("name");var value=0;if($this.attr("default")){value=$this.attr("default")}else{if($("option:selected",$this).length>0){value=$($("option:selected",$this).get(0)).val()}}var label="";if($("option[value='"+value+"']",$this).length>0){label=$("option[value='"+value+"']",$this).text()}else{label=$($("option",$this).get(0)).text()}var ref=$this.attr("ref");var param=$this.attr("param");var isAjax=$this.attr("isAjax");var url=$this.attr("url");var cid=Math.round(Math.random()*10000000);var select='<div class="combox"><div id="'+cid+'" class="select"'+(ref?' rel="'+ref+'"':"")+' name="'+name+'"'+(param?' param="'+param+'"':"")+(isAjax?' isAjax="'+isAjax+'"':"")+(url?' url="'+url+'"':"")+">";select+='<a href="javascript:" class="'+$this.attr("class")+'" name="'+name+'" value="'+value+'" change="'+($this.attr("change")?$this.attr("change"):"")+'">'+label+"</a></div></div>";if($this.hasClass("required")){select+='<span style="color: red">*</span>'}var options='<ul class="comboxop" id="op'+cid+'">';$("option",$this).each(function(){var option=$(this);options+='<li><a class="'+(value==option.val()?"selected":"")+'" href="#" value="'+option.val()+'">'+option.text()+"</a></li>"});options+="</ul>";$("body").append(options);$this.after(select);$("div.select",$this.next()).comboxSelect();$this.remove()})}})})(jQuery);(function(b){var e,f,d;b.fn.extend({contextMenu:function(k,h){var j=b.extend({shadow:true,bindings:{},ctrSub:null},h);if(!e){e=b('<div id="contextmenu"></div>').appendTo("body").hide()}if(!f){f=b('<div id="contextmenuShadow"></div>').appendTo("body").hide()}d=d||[];d.push({id:k,shadow:j.shadow,bindings:j.bindings||{},ctrSub:j.ctrSub});var g=d.length-1;b(this).bind("contextmenu",function(l){c(g,this,l,j);return false});return this}});function c(j,h,l,g){var n=d[j];var k=b(DWZ.frag[n.id]);k.find("li").hoverClass();e.html(k);b.each(n.bindings,function(q,p){b("[rel='"+q+"']",e).bind("click",function(r){a();p(b(h),b("#"+n.id))})});var o=l.pageX;var m=l.pageY;if(b(window).width()<o+e.width()){o-=e.width()}if(b(window).height()<m+e.height()){m-=e.height()}e.css({left:o,top:m}).show();if(n.shadow){f.css({width:e.width(),height:e.height(),left:o+3,top:m+3}).show()}b(document).one("click",a);if(b.isFunction(n.ctrSub)){n.ctrSub(b(h),b("#"+n.id))}}function a(){e.hide();f.hide()}})(jQuery);var DWZ={keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},pageInfo:{pageNum:"pageNum",numPerPage:"numPerPage",orderField:"orderField",orderDirection:"orderDirection"},statusCode:{ok:200,error:300,timeout:301},ui:{sbar:true},frag:{},_msg:{},_set:{loginUrl:"",loginTitle:"",debug:false},msg:function(c,b){var a=function(g,e){e=e||[];var d=g;for(var f=0;f<e.length;f++){d=d.replace(new RegExp("\\{"+f+"\\}","g"),e[f])}return d};return a(this._msg[c],b)},debug:function(a){if(this._set.debug){alert(a)}},loadLogin:function(){if($.pdialog&&DWZ._set.loginTitle){$.pdialog.open(DWZ._set.loginUrl,"login",DWZ._set.loginTitle,{mask:true,width:520,height:260})}else{window.location=DWZ._set.loginUrl}},jsonEval:function(data){try{if($.type(data)=="string"){return eval("("+data+")")}else{return data}}catch(e){return{}}},ajaxError:function(c,a,b){if(alertMsg){alertMsg.error("<div>Http status: "+c.status+" "+c.statusText+"</div><div>ajaxOptions: "+a+"</div><div>thrownError: "+b+"</div><div>"+c.responseText+"</div>")}else{alert("Http status: "+c.status+" "+c.statusText+"\najaxOptions: "+a+"\nthrownError:"+b+"\n"+c.responseText)}},ajaxDone:function(a){if(a.statusCode===undefined&&a.message===undefined){if(alertMsg){return alertMsg.error(a)}else{return alert(a)}}if(a.statusCode==DWZ.statusCode.error){if(a.message&&alertMsg){alertMsg.error(a.message)}}else{if(a.statusCode==DWZ.statusCode.timeout){if(alertMsg){alertMsg.error(a.message||DWZ.msg("sessionTimout"),{okCall:DWZ.loadLogin})}else{DWZ.loadLogin()}}else{if(a.message&&alertMsg){alertMsg.correct(a.message)}}}},init:function(b,a){var c=$.extend({loginUrl:"login.html",loginTitle:null,callback:null,debug:false,statusCode:{}},a);this._set.loginUrl=c.loginUrl;this._set.loginTitle=c.loginTitle;this._set.debug=c.debug;$.extend(DWZ.statusCode,c.statusCode);$.extend(DWZ.pageInfo,c.pageInfo);jQuery.ajax({type:"GET",url:b,dataType:"xml",timeout:50000,cache:false,error:function(d){alert("Error loading XML document: "+b+"\nHttp status: "+d.status+" "+d.statusText)},success:function(d){$(d).find("_PAGE_").each(function(){var e=$(this).attr("id");if(e){DWZ.frag[e]=$(this).text()}});$(d).find("_MSG_").each(function(){var e=$(this).attr("id");if(e){DWZ._msg[e]=$(this).text()}});if(jQuery.isFunction(c.callback)){c.callback()}}})}};(function(a){a.setRegional=function(b,c){if(!a.regional){a.regional={}}a.regional[b]=c};a.fn.extend({ajaxUrl:function(c){var b=a(this);if(a.fn.xheditor){a("textarea.editor",b).xheditor(false)}a.ajax({type:c.type||"GET",url:c.url,data:c.data,cache:false,success:function(d){var e=DWZ.jsonEval(d);DWZ.debug("statusCode:"+e.statusCode);if(e.statusCode==DWZ.statusCode.timeout){alertMsg.error(e.message||DWZ.msg("sessionTimout"),{okCall:function(){if(a.pdialog){a.pdialog.checkTimeout()}if(navTab){navTab.checkTimeout()}DWZ.loadLogin()}})}if(e.statusCode==DWZ.statusCode.error){if(e.message){alertMsg.error(e.message)}}else{b.html(d).initUI();if(a.isFunction(c.callback)){c.callback(d)}}},error:DWZ.ajaxError})},loadUrl:function(b,c,d){a(this).ajaxUrl({url:b,data:c,callback:d})},initUI:function(){return this.each(function(){if(a.isFunction(initUI)){initUI(this)}})},layoutH:function(b){return this.each(function(){var e=a(this);if(!b){b=e.parents("div.layoutBox:first")}var c=b.height();var f=parseInt(e.attr("layoutH"));var d=c-f>50?c-f:50;if(e.isTag("table")){e.removeAttr("layoutH").wrap('<div layoutH="'+f+'" style="overflow:auto;height:'+d+'px"></div>')}else{e.height(d).css("overflow","auto")}})},hoverClass:function(b){var c=b||"hover";return this.each(function(){a(this).hover(function(){a(this).addClass(c)},function(){a(this).removeClass(c)})})},focusClass:function(b){var c=b||"textInputFocus";return this.each(function(){a(this).focus(function(){a(this).addClass(c)}).blur(function(){a(this).removeClass(c)})})},inputAlert:function(){return this.each(function(){var d=a(this);function c(){return d.parent().find("label.alt")}function e(g){var f=d.position();return{width:d.width(),top:f.top+"px",left:f.left+"px",opacity:g||1}}if(c().size()<1){if(!d.attr("id")){d.attr("id",d.attr("name")+"_"+Math.round(Math.random()*10000))}var b=a('<label class="alt" for="'+d.attr("id")+'">'+d.attr("alt")+"</label>").appendTo(d.parent());b.css(e(1));if(d.val()){b.hide()}}d.focus(function(){c().css(e(0.3))}).blur(function(){if(!a(this).val()){c().show().css("opacity",1)}}).keydown(function(){c().hide()})})},isTag:function(b){if(!b){return false}return a(this)[0].tagName.toLowerCase()==b?true:false},isbind:function(b){var c=a(this).data("events");return c&&c.refChange}});a.extend(String.prototype,{isPositiveInteger:function(){return(new RegExp(/^[1-9]\d*$/).test(this))},isInteger:function(){return(new RegExp(/^\d+$/).test(this))},isNumber:function(c,b){return(new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this))},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},replaceAll:function(c,b){return this.replace(new RegExp(c,"gm"),b)},replaceTm:function(b){if(!b){return this}return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(c){return b[c.replace(/[{}]+/g,"")]})},replaceTmById:function(b){var c=b||a(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(d){var e=c.find("#"+d.replace(/[{}]+/g,""));return e.val()?e.val():d})},isFinishedTm:function(){return !(new RegExp("{[A-Za-z_]+[A-Za-z0-9_]*}").test(this))},skipChar:function(b){if(!this||this.length===0){return""}if(this.charAt(0)===b){return this.substring(1).skipChar(b)}return this},isValidPwd:function(){return(new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this))},isValidMail:function(){return(new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim()))},isSpaces:function(){for(var b=0;b<this.length;b+=1){var c=this.charAt(b);if(c!=" "&&c!="\n"&&c!="\t"&&c!="\r"){return false}}return true},isPhone:function(){return(new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this))},isUrl:function(){return(new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this))},isExternalUrl:function(){return this.isUrl()&&this.indexOf("://"+document.domain)==-1}})})(jQuery);function Map(){this.elements=new Array();this.size=function(){return this.elements.length};this.isEmpty=function(){return(this.elements.length<1)};this.clear=function(){this.elements=new Array()};this.put=function(b,a){this.remove(b);this.elements.push({key:b,value:a})};this.remove=function(a){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==a){this.elements.splice(i,1);return true}}}catch(b){return false}return false};this.get=function(a){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==a){return this.elements[i].value}}}catch(b){return null}};this.element=function(a){if(a<0||a>=this.elements.length){return null}return this.elements[a]};this.containsKey=function(a){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==a){return true}}}catch(b){return false}return false};this.values=function(){var a=new Array();for(i=0;i<this.elements.length;i++){a.push(this.elements[i].value)}return a};this.keys=function(){var a=new Array();for(i=0;i<this.elements.length;i++){a.push(this.elements[i].key)}return a}}(function(a){a.fn.extend({cssTable:function(b){return this.each(function(){var f=a(this);var e=f.find("tbody>tr");var c=f.parent();var d=f.hasClass("nowrap");e.hoverClass("hover").each(function(g){var h=a(this);if(!d&&g%2==1){h.addClass("trbg")}h.click(function(){e.filter(".selected").removeClass("selected");h.addClass("selected");var j=h.attr("target");if(j){if(a("#"+j,c).size()==0){c.prepend('<input id="'+j+'" type="hidden" />')}a("#"+j,c).val(h.attr("rel"))}})});f.find("thead [orderField]").orderBy({targetType:f.attr("targetType"),asc:f.attr("asc")||"asc",desc:f.attr("desc")||"desc"})})}})})(jQuery);(function($){var _lookup={currentGroup:"",suffix:false,$target:null,pk:"id"};var _util={_lookupPrefix:function(key){var strDot=_lookup.currentGroup?".":"";return _lookup.currentGroup+strDot+key},lookupPk:function(key){return this._lookupPrefix(key)+(_lookup.suffix?"[]":"")},lookupField:function(key){return"dwz."+this.lookupPk(key)}};$.extend({bringBackSuggest:function(args){var $box=_lookup["$target"].parents(".unitBox:first");$box.find(":input").each(function(){var $input=$(this),inputName=$input.attr("name");for(var key in args){var name=(_lookup.pk==key)?_util.lookupPk(key):_util.lookupField(key);if(name==inputName){$input.val(args[key]);break}}})},bringBack:function(args){$.bringBackSuggest(args);$.pdialog.closeCurrent()}});$.fn.extend({lookup:function(){return this.each(function(){var $this=$(this),options={mask:true,width:$this.attr("width")||820,height:$this.attr("height")||400,maxable:eval($this.attr("maxable")||"true"),resizable:eval($this.attr("resizable")||"true")};$this.click(function(event){_lookup=$.extend(_lookup,{currentGroup:$this.attr("lookupGroup")||"",suffix:$this.attr("suffix")||false,$target:$this,pk:$this.attr("lookupPk")||"id"});var url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));if(!url.isFinishedTm()){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}$.pdialog.open(url,"_blank",$this.attr("title")||$this.text(),options);return false})})},multLookup:function(){return this.each(function(){var $this=$(this),args={};$this.click(function(event){var $unitBox=$this.parents(".unitBox:first");$unitBox.find("[name='"+$this.attr("multLookup")+"']").filter(":checked").each(function(){var _args=DWZ.jsonEval($(this).val());for(var key in _args){var value=args[key]?args[key]+",":"";args[key]=value+_args[key]}});if($.isEmptyObject(args)){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}$.bringBack(args)})})},suggest:function(){var op={suggest$:"#suggest",suggestShadow$:"#suggestShadow"};var selectedIndex=-1;return this.each(function(){var $input=$(this).attr("autocomplete","off").keydown(function(event){if(event.keyCode==DWZ.keyCode.ENTER){return false}});var suggestFields=$input.attr("suggestFields").split(",");function _show(event){var offset=$input.offset();var iTop=offset.top+this.offsetHeight;var $suggest=$(op.suggest$);if($suggest.size()==0){$suggest=$('<div id="suggest"></div>').appendTo($("body"))}$suggest.css({left:offset.left+"px",top:iTop+"px"}).show();_lookup=$.extend(_lookup,{currentGroup:$input.attr("lookupGroup")||"",suffix:$input.attr("suffix")||false,$target:$input,pk:$input.attr("lookupPk")||"id"});var url=unescape($input.attr("suggestUrl")).replaceTmById($(event.target).parents(".unitBox:first"));if(!url.isFinishedTm()){alertMsg.error($input.attr("warn")||DWZ.msg("alertSelectMsg"));return false}$.ajax({type:"POST",dataType:"json",url:url,cache:false,data:{inputValue:$input.val()},success:function(response){if(!response){return}var html="";$.each(response,function(i){var liAttr="",liLabel="";for(var i=0;i<suggestFields.length;i++){var str=this[suggestFields[i]];if(str){if(liLabel){liLabel+="-"}liLabel+=str;if(liAttr){liAttr+=","}liAttr+=suggestFields[i]+":'"+str+"'"}}html+='<li lookupId="'+this["id"]+'" lookupAttrs="'+liAttr+'">'+liLabel+"</li>"});$suggest.html("<ul>"+html+"</ul>").find("li").hoverClass("selected").click(function(){_select($(this))})},error:function(){$suggest.html("")}});$(document).bind("click",_close);return false}function _select($item){var jsonStr="{id:'"+$item.attr("lookupId")+"',"+$item.attr("lookupAttrs")+"}";$.bringBackSuggest(DWZ.jsonEval(jsonStr))}function _close(){$(op.suggest$).html("").hide();selectedIndex=-1;$(document).unbind("click",_close)}$input.focus(_show).click(false).keyup(function(event){var $items=$(op.suggest$).find("li");switch(event.keyCode){case DWZ.keyCode.ESC:case DWZ.keyCode.TAB:case DWZ.keyCode.SHIFT:case DWZ.keyCode.HOME:case DWZ.keyCode.END:case DWZ.keyCode.LEFT:case DWZ.keyCode.RIGHT:break;case DWZ.keyCode.ENTER:_close();break;case DWZ.keyCode.DOWN:if(selectedIndex>=$items.size()-1){selectedIndex=-1}else{selectedIndex++}break;case DWZ.keyCode.UP:if(selectedIndex<0){selectedIndex=$items.size()-1}else{selectedIndex--}break;default:_show(event)}$items.removeClass("selected");if(selectedIndex>=0){var $item=$items.eq(selectedIndex).addClass("selected");_select($item)}})})},itemDetail:function(){return this.each(function(){var $table=$(this).css("clear","both"),$tbody=$table.find("tbody");var fields=[],suffix=$table.attr("suffix")||false;$table.find("tr:first th[type]").each(function(){var $th=$(this);var field={type:$th.attr("type")||"text",patternDate:$th.attr("format")||"yyyy-MM-dd",name:$th.attr("name")||"",size:$th.attr("size")||"12",enumUrl:$th.attr("enumUrl")||"",lookupGroup:$th.attr("lookupGroup")||"",lookupUrl:$th.attr("lookupUrl")||"",suggestUrl:$th.attr("suggestUrl"),suggestFields:$th.attr("suggestFields"),fieldClass:$th.attr("fieldClass")||""};fields.push(field)});$tbody.find("a.btnDel").click(function(){var $btnDel=$(this);function delDbData(){$.ajax({type:"POST",dataType:"json",url:$btnDel.attr("href"),cache:false,success:function(){$btnDel.parents("tr:first").remove()},error:DWZ.ajaxError})}if($btnDel.attr("title")){alertMsg.confirm($btnDel.attr("title"),{okCall:delDbData})}else{delDbData()}return false});var addButTxt=$table.attr("addButton")||"Add New";if(addButTxt){var $addBut=$('<div class="button"><div class="buttonContent"><button type="button">'+addButTxt+"</button></div></div>").insertBefore($table).find("button");var $rowNum=$('<input type="text" name="dwz_rowNum" class="textInput" style="margin:2px;" value="1" size="2"/>').insertBefore($table);var trTm="";$addBut.click(function(){if(!trTm){trTm=trHtml(fields,suffix)}var rowNum=1;try{rowNum=parseInt($rowNum.val())}catch(e){}for(var i=0;i<rowNum;i++){var $tr=$(trTm);$tr.appendTo($tbody).initUI().find("a.btnDel").click(function(){$(this).parents("tr:first").remove();return false})}})}});function tdHtml(field,suffix){var html="",suffixFrag=suffix?' suffix="true" ':"";switch(field.type){case"del":html='<a href="javascript:void(0)" class="btnDel '+field.fieldClass+'">删除</a>';break;case"lookup":var suggestFrag="";if(field.suggestFields){suggestFrag='autocomplete="off" lookupGroup="'+field.lookupGroup+'"'+suffixFrag+' suggestUrl="'+field.suggestUrl+'" suggestFields="'+field.suggestFields+'"'}html='<input type="hidden" name="'+field.lookupGroup+'.id"/><input type="text" name="'+field.name+'"'+suggestFrag+' size="'+field.size+'" class="'+field.fieldClass+'"/><a class="btnLook" href="'+field.lookupUrl+'" lookupGroup="'+field.lookupGroup+'"'+suffixFrag+' title="查找带回">查找带回</a>';break;case"attach":html='<input type="hidden" name="'+field.lookupGroup+'.id"/><input type="text" name="'+field.name+'" size="'+field.size+'" readonly="readonly" class="'+field.fieldClass+'"/><a class="btnAttach" href="'+field.lookupUrl+'" lookupGroup="'+field.lookupGroup+'"'+suffixFrag+' width="560" height="300" title="查找带回">查找带回</a>';break;case"enum":$.ajax({type:"POST",dataType:"html",async:false,url:field.enumUrl,data:{inputName:field.name},success:function(response){html=response}});break;case"date":html='<input type="text" name="'+field.name+'" class="date '+field.fieldClass+'" format="'+field.patternDate+'" size="'+field.size+'"/><a class="inputDateButton" href="javascript:void(0)">选择</a>';break;default:html='<input type="text" name="'+field.name+'" size="'+field.size+'" class="'+field.fieldClass+'"/>';break}return"<td>"+html+"</td>"}function trHtml(fields,suffix){var html="";$(fields).each(function(){html+=tdHtml(this,suffix)});return'<tr class="unitBox">'+html+"</tr>"}},selectedTodo:function(){function _getIds(selectedIds,targetType){var ids="";var $box=targetType=="dialog"?$.pdialog.getCurrent():navTab.getCurrentPanel();$box.find("input:checked").filter("[name='"+selectedIds+"']").each(function(i){var val=$(this).val();ids+=i==0?val:","+val});return ids}return this.each(function(){var $this=$(this);var selectedIds=$this.attr("rel")||"ids";var postType=$this.attr("postType")||"map";$this.click(function(){var ids=_getIds(selectedIds,$this.attr("targetType"));if(!ids){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}function _doPost(){$.ajax({type:"POST",url:$this.attr("href"),dataType:"json",cache:false,data:function(){if(postType=="map"){return $.map(ids.split(","),function(val,i){return{name:selectedIds,value:val}})}else{var _data={};_data[selectedIds]=ids;return _data}}(),success:navTabAjaxDone,error:DWZ.ajaxError})}var title=$this.attr("title");if(title){alertMsg.confirm(title,{okCall:_doPost})}else{_doPost()}return false})})}})})(jQuery);(function(b){b.setRegional("datepicker",{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});b.fn.datepicker=function(g){var f={box$:"#calendar",year$:"#calendar [name=year]",month$:"#calendar [name=month]",tmInputs$:"#calendar .time :text",hour$:"#calendar .time .hh",minute$:"#calendar .time .mm",second$:"#calendar .time .ss",tmBox$:"#calendar .tm",tmUp$:"#calendar .time .up",tmDown$:"#calendar .time .down",close$:"#calendar .close",calIcon$:"a.inputDateButton",main$:"#calendar .main",days$:"#calendar .days",dayNames$:"#calendar .dayNames",clearBut$:"#calendar .clearBut",okBut$:"#calendar .okBut"};function h(k){var j=b(f.tmBox$);j.removeClass("hh").removeClass("mm").removeClass("ss");if(k){j.addClass(k);b(f.tmInputs$).removeClass("slt").filter("."+k).addClass("slt")}}function c(k,j){b(f.tmBox$).find("."+j+" li").each(function(){var l=b(this);l.click(function(){k.val(l.text())})})}function e(j){if(!((j.keyCode>=48&&j.keyCode<=57)||(j.keyCode==DWZ.keyCode.DELETE||j.keyCode==DWZ.keyCode.BACKSPACE))){return false}}function d(n,l){var j=parseInt(n.val()),m=parseInt(n.attr("start")),k=parseInt(n.attr("end"));if(l==1){if(j<k){n.val(j+1)}}else{if(l==-1){if(j>m){n.val(j-1)}}else{if(j>k){n.val(k)}else{if(j<m){n.val(m)}}}}}return this.each(function(){var l=b(this);var m=new a(l.val(),g);function j(q){var n=q.getDateWrap();var z=new Date(n.year,n.month-1,1);var u=z.getDay();var r="";if(u>0){z.setMonth(z.getMonth()-1);var s=q.getDateWrap(z);for(var A=s.days-u+1;A<=s.days;A++){r+='<dd class="other" chMonth="-1" day="'+A+'">'+A+"</dd>"}}for(var A=1;A<=n.days;A++){if(A==n.day){r+='<dd class="slt" day="'+A+'">'+A+"</dd>"}else{r+='<dd day="'+A+'">'+A+"</dd>"}}for(var A=1;A<=42-u-n.days;A++){r+='<dd class="other" chMonth="1" day="'+A+'">'+A+"</dd>"}var w=b(f.days$).html(r).find("dd");w.click(function(){var t=b(this);l.val(q.formatDate(q.changeDay(t.attr("day"),t.attr("chMonth"))));if(!q.hasTime()){k()}else{w.removeClass("slt");t.addClass("slt")}});if(!q.hasDate()){b(f.main$).addClass("nodate")}if(q.hasTime()){b("#calendar .time").show();var p=b(f.hour$).val(n.hour).focus(function(){h("hh")});var x=b(f.minute$).val(n.minute).focus(function(){h("mm")});var v=b(f.second$).val(n.second).focus(function(){h("ss")});p.add(x).add(v).click(function(){return false});c(p,"hh");c(x,"mm");c(v,"ss");b(f.box$).click(function(){h()});var o=b(f.tmInputs$);o.keydown(e).each(function(){var t=b(this);t.keyup(function(){d(t,0)})});b(f.tmUp$).click(function(){o.filter(".slt").each(function(){d(b(this),1)})});b(f.tmDown$).click(function(){o.filter(".slt").each(function(){d(b(this),-1)})});if(!q.hasHour()){p.attr("disabled",true)}if(!q.hasMinute()){x.attr("disabled",true)}if(!q.hasSecond()){v.attr("disabled",true)}}}function k(){b(f.box$).remove();b(document).unbind("click",k)}l.click(function(o){k();var q=new a(l.val(),g);var r=l.offset();var s=r.top+this.offsetHeight;b(DWZ.frag.calendarFrag).appendTo("body").css({left:r.left+"px",top:s+"px"}).show().click(function(z){z.stopPropagation()});(b.fn.bgiframe&&b(f.box$).bgiframe());var p="";b.each(b.regional.datepicker.dayNames,function(A,z){p+="<dt>"+z+"</dt>"});b(f.dayNames$).html(p);var n=q.getDateWrap();var u=b(f.year$);var w=n.year+parseInt(q.get("yearstart"));var v=n.year+parseInt(q.get("yearend"));for(y=w;y<=v;y++){u.append('<option value="'+y+'"'+(n.year==y?'selected="selected"':"")+">"+y+"</option>")}var t=b(f.month$);b.each(b.regional.datepicker.monthNames,function(B,A){var z=B+1;t.append('<option value="'+z+'"'+(n.month==z?'selected="selected"':"")+">"+A+"</option>")});j(q);u.add(t).change(function(){q.changeDate(u.val(),t.val());j(q)});var x=b(f.box$).outerHeight(true);if(s>x&&s>b(window).height()-x){b(f.box$).css("top",r.top-x)}b(f.close$).click(function(){k()});b(f.clearBut$).click(function(){l.val("");k()});b(f.okBut$).click(function(){var A=b(f.days$).find("dd.slt");var z=q.changeDay(A.attr("day"),A.attr("chMonth"));if(q.hasTime()){z.setHours(parseInt(b(f.hour$).val()));z.setMinutes(parseInt(b(f.minute$).val()));z.setSeconds(parseInt(b(f.second$).val()))}l.val(q.formatDate(z));k()});b(document).bind("click",k);return false});l.parent().find(f.calIcon$).click(function(){l.trigger("click");return false})})};var a=function(d,c){this.opts=b.extend({pattern:"yyyy-MM-dd",yearstart:-10,yearend:10},c);this.sDate=d.trim()};b.extend(a.prototype,{get:function(c){return this.opts[c]},_getDays:function(d,c){return c==2?(d%4||!(d%100)&&d%400?28:29):(/4|6|9|11/.test(c)?30:31)},getDateWrap:function(d){if(!d){d=this.parseDate(this.sDate)||new Date()}var f=d.getFullYear();var c=d.getMonth()+1;var e=this._getDays(f,c);return{year:f,month:c,day:d.getDate(),hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),days:e,date:d}},changeDate:function(g,c,f){var e=new Date(g,c-1,f||1);this.sDate=this.formatDate(e);return e},changeDay:function(c,e){if(!e){e=0}var d=this.getDateWrap();return this.changeDate(d.year,d.month+parseInt(e),c)},parseDate:function(c){return c.parseDate(this.opts.pattern)},formatDate:function(c){return c.formatDate(this.opts.pattern)},hasHour:function(){return this.opts.pattern.indexOf("H")!=-1},hasMinute:function(){return this.opts.pattern.indexOf("m")!=-1},hasSecond:function(){return this.opts.pattern.indexOf("s")!=-1},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){var d=["y","M","d","E"];for(var c=0;c<d.length;c++){if(this.opts.pattern.indexOf(d[c])!=-1){return true}}return false}})})(jQuery);(function(a){a.pdialog={_op:{height:300,width:580,minH:40,minW:50,total:20,max:false,mask:false,resizable:true,drawable:true,maxable:true,minable:true,fresh:true},_current:null,_zIndex:42,getCurrent:function(){return this._current},reload:function(c,b){var f=a.extend({data:{},dialogId:"",callback:null},b);var d=(f.dialogId&&a("body").data(f.dialogId))||this._current;if(d){var e=d.find(".dialogContent");e.ajaxUrl({type:"POST",url:c,data:f.data,callback:function(g){e.find("[layoutH]").layoutH(e);a(".pageContent",d).width(a(d).width()-14);a(":button.close",d).click(function(){a.pdialog.close(d);return false});if(a.isFunction(f.callback)){f.callback(g)}}})}},open:function(c,f,g,b){var h=a.extend({},a.pdialog._op,b);var d=a("body").data(f);if(d){if(d.is(":hidden")){d.show()}if(h.fresh||c!=a(d).data("url")){d.data("url",c);d.find(".dialogHeader").find("h1").html(g);this.switchDialog(d);var e=d.find(".dialogContent");e.loadUrl(c,{},function(){e.find("[layoutH]").layoutH(e);a(".pageContent",d).width(a(d).width()-14);a("button.close").click(function(){a.pdialog.close(d);return false})})}}else{a("body").append(DWZ.frag.dialogFrag);d=a(">.dialog:last-child","body");d.data("id",f);d.data("url",c);if(b.close){d.data("close",b.close)}if(b.param){d.data("param",b.param)}(a.fn.bgiframe&&d.bgiframe());d.find(".dialogHeader").find("h1").html(g);a(d).css("zIndex",(a.pdialog._zIndex+=2));a("div.shadow").css("zIndex",a.pdialog._zIndex-3).show();a.pdialog._init(d,b);a(d).click(function(){a.pdialog.switchDialog(d)});if(h.resizable){d.jresize()}if(h.drawable){d.dialogDrag()}a("a.close",d).click(function(j){a.pdialog.close(d);return false});if(h.maxable){a("a.maximize",d).show().click(function(j){a.pdialog.switchDialog(d);a.pdialog.maxsize(d);d.jresize("destroy").dialogDrag("destroy");return false})}else{a("a.maximize",d).hide()}a("a.restore",d).click(function(j){a.pdialog.restore(d);d.jresize().dialogDrag();return false});if(h.minable){a("a.minimize",d).show().click(function(j){a.pdialog.minimize(d);return false})}else{a("a.minimize",d).hide()}a("div.dialogHeader a",d).mousedown(function(){return false});a("div.dialogHeader",d).dblclick(function(){if(a("a.restore",d).is(":hidden")){a("a.maximize",d).trigger("click")}else{a("a.restore",d).trigger("click")}});if(h.max){a.pdialog.maxsize(d);d.jresize("destroy").dialogDrag("destroy")}a("body").data(f,d);a.pdialog._current=d;a.pdialog.attachShadow(d);var e=a(".dialogContent",d);e.loadUrl(c,{},function(){e.find("[layoutH]").layoutH(e);a(".pageContent",d).width(a(d).width()-14);a("button.close").click(function(){a.pdialog.close(d);return false})})}if(h.mask){a(d).css("zIndex",1000);a("a.minimize",d).hide();a(d).data("mask",true);a("#dialogBackground").show()}else{if(h.minable){a.taskBar.addDialog(f,g)}}},switchDialog:function(c){var b=a(c).css("zIndex");a.pdialog.attachShadow(c);if(a.pdialog._current){var d=a(a.pdialog._current).css("zIndex");a(a.pdialog._current).css("zIndex",b);a(c).css("zIndex",d);a("div.shadow").css("zIndex",d-1);a.pdialog._current=c}a.taskBar.switchTask(c.data("id"))},attachShadow:function(b){var c=a("div.shadow");if(c.is(":hidden")){c.show()}c.css({top:parseInt(a(b)[0].style.top)-2,left:parseInt(a(b)[0].style.left)-4,height:parseInt(a(b).height())+8,width:parseInt(a(b).width())+8,zIndex:parseInt(a(b).css("zIndex"))-1});a(".shadow_c",c).children().andSelf().each(function(){a(this).css("height",a(b).outerHeight()-4)})},_init:function(d,c){var g=a.extend({},this._op,c);var b=g.height>g.minH?g.height:g.minH;var e=g.width>g.minW?g.width:g.minW;if(isNaN(d.height())||d.height()<b){a(d).height(b+"px");a(".dialogContent",d).height(b-a(".dialogHeader",d).outerHeight()-a(".dialogFooter",d).outerHeight()-6)}if(isNaN(d.css("width"))||d.width()<e){a(d).width(e+"px")}var f=(a(window).height()-d.height())/2;d.css({left:(a(window).width()-d.width())/2,top:f>0?f:0})},initResize:function(c,b,d){a("body").css("cursor",d+"-resize");c.css({top:a(b).css("top"),left:a(b).css("left"),height:a(b).css("height"),width:a(b).css("width")});c.show()},repaint:function(c,b){var d=a("div.shadow");if(c!="w"&&c!="e"){d.css("height",d.outerHeight()+b.tmove);a(".shadow_c",d).children().andSelf().each(function(){a(this).css("height",a(this).outerHeight()+b.tmove)})}if(c=="n"||c=="nw"||c=="ne"){d.css("top",b.otop-2)}if(b.owidth&&(c!="n"||c!="s")){d.css("width",b.owidth+8)}if(c.indexOf("w")>=0){d.css("left",b.oleft-4)}},resizeTool:function(d,c,b){a("div[class^='resizable']",b).filter(function(){return a(this).attr("tar")=="w"||a(this).attr("tar")=="e"}).each(function(){a(this).css("height",a(this).outerHeight()+c)})},resizeDialog:function(j,d,h){var c=parseInt(j.style.left);var f=parseInt(j.style.top);var b=parseInt(j.style.height);var e=parseInt(j.style.width);if(h=="n"||h=="nw"){tmove=parseInt(a(d).css("top"))-f}else{tmove=b-parseInt(a(d).css("height"))}a(d).css({left:c,width:e,top:f,height:b});a(".dialogContent",d).css("width",(e-12)+"px");a(".pageContent",d).css("width",(e-14)+"px");if(h!="w"&&h!="e"){var g=a(".dialogContent",d);g.css({height:b-a(".dialogHeader",d).outerHeight()-a(".dialogFooter",d).outerHeight()-6});g.find("[layoutH]").layoutH(g);a.pdialog.resizeTool(h,tmove,d)}a.pdialog.repaint(h,{oleft:c,otop:f,tmove:tmove,owidth:e});a(window).trigger("resizeGrid")},close:function(b){if(typeof b=="string"){b=a("body").data(b)}var e=b.data("close");var c=true;if(e&&a.isFunction(e)){var d=b.data("param");if(d&&d!=""){d=DWZ.jsonEval(d);c=e(d)}else{c=e()}if(!c){return}}if(a.fn.xheditor){a("textarea.editor",b).xheditor(false)}a(b).unbind("click").hide();a("div.dialogContent",b).html("");a("div.shadow").hide();if(a(b).data("mask")){a("#dialogBackground").hide()}else{a.taskBar.closeDialog(a(b).data("id"))}a("body").removeData(a(b).data("id"));a(b).remove()},closeCurrent:function(){this.close(a.pdialog._current)},checkTimeout:function(){var c=a(".dialogContent",a.pdialog._current);var b=DWZ.jsonEval(c.html());if(b&&b.statusCode==DWZ.statusCode.timeout){this.closeCurrent()}},maxsize:function(c){a(c).data("original",{top:a(c).css("top"),left:a(c).css("left"),width:a(c).css("width"),height:a(c).css("height")});a("a.maximize",c).hide();a("a.restore",c).show();var d=a(window).width();var b=a(window).height()-34;a(c).css({top:"0px",left:"0px",width:d+"px",height:b+"px"});a.pdialog._resizeContent(c,d,b)},restore:function(c){var b=a(c).data("original");var d=parseInt(b.width);var e=parseInt(b.height);a(c).css({top:b.top,left:b.left,width:d,height:e});a.pdialog._resizeContent(c,d,e);a("a.maximize",c).show();a("a.restore",c).hide();a.pdialog.attachShadow(c)},minimize:function(c){a(c).hide();a("div.shadow").hide();var b=a.taskBar.getTask(a(c).data("id"));a(".resizable").css({top:a(c).css("top"),left:a(c).css("left"),height:a(c).css("height"),width:a(c).css("width")}).show().animate({top:a(window).height()-60,left:b.position().left,width:b.outerWidth(),height:b.outerHeight()},250,function(){a(this).hide();a.taskBar.inactive(a(c).data("id"))})},_resizeContent:function(c,d,b){var e=a(".dialogContent",c);e.css({width:(d-12)+"px",height:b-a(".dialogHeader",c).outerHeight()-a(".dialogFooter",c).outerHeight()-6});e.find("[layoutH]").layoutH(e);a(".pageContent",c).css("width",(d-14)+"px");a(window).trigger("resizeGrid")}}})(jQuery);(function(a){a.fn.dialogDrag=function(b){if(typeof b=="string"){if(b=="destroy"){return this.each(function(){var c=this;a("div.dialogHeader",c).unbind("mousedown")})}}return this.each(function(){var c=a(this);a("div.dialogHeader",c).mousedown(function(d){a.pdialog.switchDialog(c);c.data("task",true);setTimeout(function(){if(c.data("task")){a.dialogDrag.start(c,d)}},100);return false}).mouseup(function(d){c.data("task",false);return false})})};a.dialogDrag={currId:null,_init:function(b){this.currId=new Date().getTime();var c=a("#dialogProxy");if(!c.size()){c=a(DWZ.frag.dialogProxy);a("body").append(c)}a("h1",c).html(a(".dialogHeader h1",b).text())},start:function(c,d){this._init(c);var b=a("#dialogProxy");b.css({left:c.css("left"),top:c.css("top"),height:c.css("height"),width:c.css("width"),zIndex:parseInt(c.css("zIndex"))+1}).show();a("div.dialogContent",b).css("height",a("div.dialogContent",c).css("height"));b.data("dialog",c);c.css({left:"-10000px",top:"-10000px"});a(".shadow").hide();a(b).jDrag({selector:".dialogHeader",stop:this.stop,event:d});return false},stop:function(){var c=a(arguments[0]);var b=c.data("dialog");a(b).css({left:a(c).css("left"),top:a(c).css("top")});a.pdialog.attachShadow(b);a(c).hide()}}})(jQuery);(function(a){a.fn.jDrag=function(b){if(typeof b=="string"){if(b=="destroy"){return this.each(function(){a(this).unbind("mousedown",a.rwdrag.start);a.data(this,"pp-rwdrag",null)})}}return this.each(function(){var d=a(this);a.data(a.rwdrag,"pp-rwdrag",{options:a.extend({el:d,obj:d},b)});if(b.event){a.rwdrag.start(b.event)}else{var c=b.selector;a(c,obj).bind("mousedown",a.rwdrag.start)}})};a.rwdrag={start:function(d){var c=a.data(this,"pp-rwdrag");var b=c.options.el[0];a.data(b,"pp-rwdrag",{options:c.options});if(!a.rwdrag.current){a.rwdrag.current={el:b,oleft:parseInt(b.style.left)||0,otop:parseInt(b.style.top)||0,ox:d.pageX||d.screenX,oy:d.pageY||d.screenY};a(document).bind("mouseup",a.rwdrag.stop);a(document).bind("mousemove",a.rwdrag.drag)}},drag:function(h){if(!h){var h=window.event}var g=a.rwdrag.current;var c=a.data(g.el,"pp-rwdrag");var f=(g.oleft+(h.pageX||h.clientX)-g.ox);var d=(g.otop+(h.pageY||h.clientY)-g.oy);if(d<1){d=0}if(c.options.move=="horizontal"){if((c.options.minW&&f>=a(c.options.obj).cssv("left")+c.options.minW)&&(c.options.maxW&&f<=a(c.options.obj).cssv("left")+c.options.maxW)){g.el.style.left=f+"px"}else{if(c.options.scop){if(c.options.relObj){if((f-parseInt(c.options.relObj.style.left))>c.options.cellMinW){g.el.style.left=f+"px"}}else{g.el.style.left=f+"px"}}}}else{if(c.options.move=="vertical"){g.el.style.top=d+"px"}else{var b=a(c.options.selector,a(c.options.obj));if(f>=-b.outerWidth()*2/3&&d>=0&&(f+b.outerWidth()/3<a(window).width())&&(d+b.outerHeight()<a(window).height())){g.el.style.left=f+"px";g.el.style.top=d+"px"}}}return a.rwdrag.preventEvent(h)},stop:function(d){var c=a.rwdrag.current;var b=a.data(c.el,"pp-rwdrag");a(document).unbind("mousemove",a.rwdrag.drag);a(document).unbind("mouseup",a.rwdrag.stop);if(b.options.stop){b.options.stop.apply(c.el,[c.el])}a.rwdrag.current=null;return a.rwdrag.preventEvent(d)},preventEvent:function(b){if(b.stopPropagation){b.stopPropagation()}if(b.preventDefault){b.preventDefault()}return false}}})(jQuery);(function(a){a.extend(a.fn,{jBlindUp:function(b){var c=a.extend({duration:500,easing:"swing",call:function(){}},b);return this.each(function(){var d=a(this);a(this).animate({height:0},{step:function(){},duration:c.duration,easing:c.easing,complete:function(){d.css({display:"none"});c.call()}})})},jBlindDown:function(b){var c=a.extend({to:0,duration:500,easing:"swing",call:function(){}},b);return this.each(function(){var e=a(this);var d=(c.to>0)?c.to:a.effect.getDimensions(e[0]).height;e.animate({height:d},{step:function(){},duration:c.duration,easing:c.easing,complete:function(){e.css({display:""});c.call()}})})},jSlideUp:function(b){var c=a.extend({to:0,duration:500,easing:"swing",call:function(){}},b);return this.each(function(){var e=a(this);e.wrapInner("<div></div>");var d=(c.to>0)?c.to:a.effect.getDimensions(a(">div",e)[0]).height;e.css({overflow:"visible",position:"relative"});a(">div",e).css({position:"relative"}).animate({top:-d},{easing:c.easing,duration:c.duration,complete:function(){e.html(a(this).html())}});e.animate({height:0},{duration:c.duration,easing:c.easing,complete:function(){e.css({display:"none",height:""});c.call()}})})},jSlideDown:function(b){var c=a.extend({to:0,duration:500,easing:"swing",call:function(){}},b);return this.each(function(){var e=a(this);var d=(c.to>0)?c.to:a.effect.getDimensions(e[0]).height;e.wrapInner('<div style="top:-'+d+'px;"></div>');e.css({overflow:"visible",position:"relative",height:"0px"}).animate({height:d},{duration:c.duration,easing:c.easing,complete:function(){e.css({display:"",overflow:""});c.call()}});a(">div",e).css({position:"relative"}).animate({top:0},{easing:c.easing,duration:c.duration,complete:function(){e.html(a(this).html())}})})}});a.effect={getDimensions:function(c,g){var d=new a.effect.Rectangle;var f=a(c).css("display");var b=a(c).css("visibility");var e=a(c).height()==0?true:false;if(a(c).is(":hidden")){a(c).css({visibility:"hidden",display:"block"});if(e){a(c).css("height","")}if(a.browser.opera){refElement.focus()}}d.height=a(c).height();d.width=a(c).width();if(f=="none"){a(c).css({visibility:b,display:"none"});if(e){if(e){a(c).css("height","0px")}}}return d}};a.effect.Rectangle=function(){this.width=0;this.height=0;this.unit="px"}})(jQuery);(function(a){a.extend({History:{_hash:new Array(),_cont:undefined,_currentHash:"",_callback:undefined,init:function(b,f){a.History._cont=b;a.History._callback=f;var e=location.hash.replace(/\?.*$/,"");a.History._currentHash=e;if(a.browser.msie){if(a.History._currentHash==""){a.History._currentHash="#"}a("body").prepend('<iframe id="jQuery_history" style="display: none;"></iframe>');var c=a("#jQuery_history")[0];var d=c.contentDocument||c.contentWindow.document;d.open();d.close();d.location.hash=e}if(a.isFunction(this._callback)){a.History._callback(e.skipChar("#"))}setInterval(a.History._historyCheck,100)},_historyCheck:function(){var d="";if(a.browser.msie){var b=a("#jQuery_history")[0];var c=b.contentWindow;d=c.location.hash.skipChar("#").replace(/\?.*$/,"")}else{d=location.hash.skipChar("#").replace(/\?.*$/,"")}if(d!=a.History._currentHash){a.History._currentHash=d;a.History.loadHistory(d)}},addHistory:function(g,c,d){a.History._currentHash=g;var f=[g,c,d];a.History._hash.push(f);if(a.browser.msie){var b=a("#jQuery_history")[0];var e=b.contentDocument||b.contentWindow.document;e.open();e.close();e.location.hash=g.replace(/\?.*$/,"");location.hash=g.replace(/\?.*$/,"")}else{location.hash=g.replace(/\?.*$/,"")}},loadHistory:function(c){if(a.browser.msie){location.hash=c}for(var b=0;b<a.History._hash.length;b+=1){if(a.History._hash[b][0]==c){a.History._hash[b][1](a.History._hash[b][2]);return}}}}})})(jQuery);(function(a){a.pdialog={_op:{height:300,width:500,minH:40,minW:50,total:20,max:false,mask:false,resizable:true,drawable:true,maxable:true,minable:true,fresh:true},_current:null,_zIndex:42,getCurrent:function(){return this._current},reload:function(c,b){var f=a.extend({data:{},dialogId:"",callback:null},b);var d=(f.dialogId&&a("body").data(f.dialogId))||this._current;if(d){var e=d.find(".dialogContent");e.loadUrl(c,f.data,function(g){e.find("[layoutH]").layoutH(e);a(".pageContent",d).width(a(d).width()-14);a(":button.close",d).click(function(){a.pdialog.close(d);return false});if(a.isFunction(f.callback)){f.callback(g)}})}},open:function(c,f,g,b){var h=a.extend({},a.pdialog._op,b);var d=a("body").data(f);if(d){if(d.is(":hidden")){d.show()}if(h.fresh||c!=a(d).data("url")){d.data("url",c);d.find(".dialogHeader").find("h1").html(g);this.switchDialog(d);var e=d.find(".dialogContent");e.loadUrl(c,{},function(){e.find("[layoutH]").layoutH(e);a(".pageContent",d).width(a(d).width()-14);a("button.close").click(function(){a.pdialog.close(d);return false})})}}else{a("body").append(DWZ.frag.dialogFrag);d=a(">.dialog:last-child","body");d.data("id",f);d.data("url",c);if(b.close){d.data("close",b.close)}if(b.param){d.data("param",b.param)}(a.fn.bgiframe&&d.bgiframe());d.find(".dialogHeader").find("h1").html(g);a(d).css("zIndex",(a.pdialog._zIndex+=2));a("div.shadow").css("zIndex",a.pdialog._zIndex-3).show();a.pdialog._init(d,b);a(d).click(function(){a.pdialog.switchDialog(d)});if(h.resizable){d.jresize()}if(h.drawable){d.dialogDrag()}a("a.close",d).click(function(j){a.pdialog.close(d);return false});if(h.maxable){a("a.maximize",d).show().click(function(j){a.pdialog.switchDialog(d);a.pdialog.maxsize(d);d.jresize("destroy").dialogDrag("destroy");return false})}else{a("a.maximize",d).hide()}a("a.restore",d).click(function(j){a.pdialog.restore(d);d.jresize().dialogDrag();return false});if(h.minable){a("a.minimize",d).show().click(function(j){a.pdialog.minimize(d);return false})}else{a("a.minimize",d).hide()}a("div.dialogHeader a",d).mousedown(function(){return false});a("div.dialogHeader",d).dblclick(function(){if(a("a.restore",d).is(":hidden")){a("a.maximize",d).trigger("click")}else{a("a.restore",d).trigger("click")}});if(h.max){a.pdialog.switchDialog(d);a.pdialog.maxsize(d);d.jresize("destroy").dialogDrag("destroy")}a("body").data(f,d);a.pdialog._current=d;a.pdialog.attachShadow(d);var e=a(".dialogContent",d);e.loadUrl(c,{},function(){e.find("[layoutH]").layoutH(e);a(".pageContent",d).width(a(d).width()-14);a("button.close").click(function(){a.pdialog.close(d);return false})})}if(h.mask){a(d).css("zIndex",1000);a("a.minimize",d).hide();a(d).data("mask",true);a("#dialogBackground").show()}else{if(h.minable){a.taskBar.addDialog(f,g)}}},switchDialog:function(c){var b=a(c).css("zIndex");a.pdialog.attachShadow(c);if(a.pdialog._current){var d=a(a.pdialog._current).css("zIndex");a(a.pdialog._current).css("zIndex",b);a(c).css("zIndex",d);a("div.shadow").css("zIndex",d-1);a.pdialog._current=c}a.taskBar.switchTask(c.data("id"))},attachShadow:function(b){var c=a("div.shadow");if(c.is(":hidden")){c.show()}c.css({top:parseInt(a(b)[0].style.top)-2,left:parseInt(a(b)[0].style.left)-4,height:parseInt(a(b).height())+8,width:parseInt(a(b).width())+8,zIndex:parseInt(a(b).css("zIndex"))-1});a(".shadow_c",c).children().andSelf().each(function(){a(this).css("height",a(b).outerHeight()-4)})},_init:function(d,c){var g=a.extend({},this._op,c);var b=g.height>g.minH?g.height:g.minH;var e=g.width>g.minW?g.width:g.minW;if(isNaN(d.height())||d.height()<b){a(d).height(b+"px");a(".dialogContent",d).height(b-a(".dialogHeader",d).outerHeight()-a(".dialogFooter",d).outerHeight()-6)}if(isNaN(d.css("width"))||d.width()<e){a(d).width(e+"px")}var f=(a(window).height()-d.height())/2;d.css({left:(a(window).width()-d.width())/2,top:f>0?f:0})},initResize:function(c,b,d){a("body").css("cursor",d+"-resize");c.css({top:a(b).css("top"),left:a(b).css("left"),height:a(b).css("height"),width:a(b).css("width")});c.show()},repaint:function(c,b){var d=a("div.shadow");if(c!="w"&&c!="e"){d.css("height",d.outerHeight()+b.tmove);a(".shadow_c",d).children().andSelf().each(function(){a(this).css("height",a(this).outerHeight()+b.tmove)})}if(c=="n"||c=="nw"||c=="ne"){d.css("top",b.otop-2)}if(b.owidth&&(c!="n"||c!="s")){d.css("width",b.owidth+8)}if(c.indexOf("w")>=0){d.css("left",b.oleft-4)}},resizeTool:function(d,c,b){a("div[class^='resizable']",b).filter(function(){return a(this).attr("tar")=="w"||a(this).attr("tar")=="e"}).each(function(){a(this).css("height",a(this).outerHeight()+c)})},resizeDialog:function(j,d,h){var c=parseInt(j.style.left);var f=parseInt(j.style.top);var b=parseInt(j.style.height);var e=parseInt(j.style.width);if(h=="n"||h=="nw"){tmove=parseInt(a(d).css("top"))-f}else{tmove=b-parseInt(a(d).css("height"))}a(d).css({left:c,width:e,top:f,height:b});a(".dialogContent",d).css("width",(e-12)+"px");a(".pageContent",d).css("width",(e-14)+"px");if(h!="w"&&h!="e"){var g=a(".dialogContent",d);g.css({height:b-a(".dialogHeader",d).outerHeight()-a(".dialogFooter",d).outerHeight()-6});g.find("[layoutH]").layoutH(g);a.pdialog.resizeTool(h,tmove,d)}a.pdialog.repaint(h,{oleft:c,otop:f,tmove:tmove,owidth:e});a(window).trigger("resizeGrid")},close:function(b){if(typeof b=="string"){b=a("body").data(b)}var e=b.data("close");var c=true;if(e&&a.isFunction(e)){var d=b.data("param");if(d&&d!=""){d=DWZ.jsonEval(d);c=e(d)}else{c=e()}if(!c){return}}if(a.fn.xheditor){a("textarea.editor",b).xheditor(false)}a(b).unbind("click").hide();a("div.dialogContent",b).html("");a("div.shadow").hide();if(a(b).data("mask")){a("#dialogBackground").hide()}else{a.taskBar.closeDialog(a(b).data("id"))}a("body").removeData(a(b).data("id"));a(b).remove()},closeCurrent:function(){this.close(a.pdialog._current)},maxsize:function(c){a(c).data("original",{top:a(c).css("top"),left:a(c).css("left"),width:a(c).css("width"),height:a(c).css("height")});a("a.maximize",c).hide();a("a.restore",c).show();var d=a(window).width();var b=a(window).height()-34;a(c).css({top:"0px",left:"0px",width:d+"px",height:b+"px"});a.pdialog._resizeContent(c,d,b)},restore:function(c){var b=a(c).data("original");var d=parseInt(b.width);var e=parseInt(b.height);a(c).css({top:b.top,left:b.left,width:d,height:e});a.pdialog._resizeContent(c,d,e);a("a.maximize",c).show();a("a.restore",c).hide();a.pdialog.attachShadow(c)},minimize:function(c){a(c).hide();a("div.shadow").hide();var b=a.taskBar.getTask(a(c).data("id"));a(".resizable").css({top:a(c).css("top"),left:a(c).css("left"),height:a(c).css("height"),width:a(c).css("width")}).show().animate({top:a(window).height()-60,left:b.position().left,width:b.outerWidth(),height:b.outerHeight()},250,function(){a(this).hide();a.taskBar.inactive(a(c).data("id"))})},_resizeContent:function(c,d,b){var e=a(".dialogContent",c);e.css({width:(d-12)+"px",height:b-a(".dialogHeader",c).outerHeight()-a(".dialogFooter",c).outerHeight()-6});e.find("[layoutH]").layoutH(e);a(".pageContent",c).css("width",(d-14)+"px");a(window).trigger("resizeGrid")}}})(jQuery);var navTab={componentBox:null,_tabBox:null,_prevBut:null,_nextBut:null,_panelBox:null,_moreBut:null,_moreBox:null,_currentIndex:0,_op:{id:"navTab",stTabBox:".navTab-tab",stPanelBox:".navTab-panel",mainTabId:"main",close$:"a.close",prevClass:"tabsLeft",nextClass:"tabsRight",stMore:".tabsMore",stMoreLi:"ul.tabsMoreList"},init:function(a){if($.History){$.History.init("#container")}var b=this;$.extend(this._op,a);this.componentBox=$("#"+this._op.id);this._tabBox=this.componentBox.find(this._op.stTabBox);this._panelBox=this.componentBox.find(this._op.stPanelBox);this._prevBut=this.componentBox.find("."+this._op.prevClass);this._nextBut=this.componentBox.find("."+this._op.nextClass);this._moreBut=this.componentBox.find(this._op.stMore);this._moreBox=this.componentBox.find(this._op.stMoreLi);this._prevBut.click(function(c){b._scrollPrev()});this._nextBut.click(function(c){b._scrollNext()});this._moreBut.click(function(){b._moreBox.show();return false});$(document).click(function(){b._moreBox.hide()});this._contextmenu(this._tabBox);this._contextmenu(this._getTabs());this._init();this._ctrlScrollBut()},_init:function(){var a=this;this._getTabs().each(function(b){$(this).unbind("click").click(function(c){a._switchTab(b)});$(this).find(navTab._op.close$).unbind("click").click(function(){a._closeTab(b)})});this._getMoreLi().each(function(b){$(this).find(">a").unbind("click").click(function(c){a._switchTab(b)})});this._switchTab(this._currentIndex)},_contextmenu:function(b){var a=this;b.contextMenu("navTabCM",{bindings:{reload:function(d,c){a._reload(d,true)},closeCurrent:function(e,c){var d=e.attr("tabid");if(d){a.closeTab(d)}else{a.closeCurrentTab()}},closeOther:function(e,c){var d=a._indexTabId(e.attr("tabid"));a._closeOtherTab(d>0?d:a._currentIndex)},closeAll:function(d,c){a.closeAllTab()}},ctrSub:function(f,c){var g=c.find("[rel='reload']");var h=c.find("[rel='closeCurrent']");var j=c.find("[rel='closeOther']");var e=c.find("[rel='closeAll']");var d=a._getTabs();if(d.size()<2){h.addClass("disabled");j.addClass("disabled");e.addClass("disabled")}if(a._currentIndex==0||f.attr("tabid")==a._op.mainTabId){h.addClass("disabled");g.addClass("disabled")}else{if(d.size()==2){j.addClass("disabled")}}}})},_getTabs:function(){return this._tabBox.find("> li")},_getPanels:function(){return this._panelBox.find("> div")},_getMoreLi:function(){return this._moreBox.find("> li")},_getTab:function(a){var b=this._indexTabId(a);if(b>=0){return this._getTabs().eq(b)}},_getPanel:function(a){var b=this._indexTabId(a);if(b>=0){return this._getPanels().eq(b)}},getPanel:function(a){return this._getPanel(a)},_getTabsW:function(b,a){return this._tabsW(this._getTabs().slice(b,a))},_tabsW:function(a){var b=0;a.each(function(){b+=$(this).outerWidth(true)});return b},_indexTabId:function(b){if(!b){return -1}var a=-1;this._getTabs().each(function(c){if($(this).attr("tabid")==b){a=c;return}});return a},_getLeft:function(){return this._tabBox.position().left},_getScrollBarW:function(){return this.componentBox.width()-55},_visibleStart:function(){var d=this._getLeft(),b=0;var a=this._getTabs();for(var c=0;c<a.size();c++){if(b+d>=0){return c}b+=a.eq(c).outerWidth(true)}return 0},_visibleEnd:function(){var d=this._getLeft(),b=0;var a=this._getTabs();for(var c=0;c<a.size();c++){b+=a.eq(c).outerWidth(true);if(b+d>this._getScrollBarW()){return c}}return a.size()},_scrollPrev:function(){var a=this._visibleStart();if(a>0){this._scrollTab(-this._getTabsW(0,a-1))}},_scrollNext:function(){var a=this._visibleEnd();if(a<this._getTabs().size()){this._scrollTab(-this._getTabsW(0,a+1)+this._getScrollBarW())}},_scrollTab:function(c,a){var b=this;this._tabBox.animate({left:c+"px"},200,function(){b._ctrlScrollBut()})},_scrollCurrent:function(){var a=this._tabsW(this._getTabs());if(a<=this._getScrollBarW()){this._scrollTab(0)}else{if(this._getLeft()<this._getScrollBarW()-a){this._scrollTab(this._getScrollBarW()-a)}else{if(this._currentIndex<this._visibleStart()){this._scrollTab(-this._getTabsW(0,this._currentIndex))}else{if(this._currentIndex>=this._visibleEnd()){this._scrollTab(this._getScrollBarW()-this._getTabs().eq(this._currentIndex).outerWidth(true)-this._getTabsW(0,this._currentIndex))}}}}},_ctrlScrollBut:function(){var a=this._tabsW(this._getTabs());if(this._getScrollBarW()>a){this._prevBut.hide();this._nextBut.hide();this._tabBox.parent().removeClass("tabsPageHeaderMargin")}else{this._prevBut.show().removeClass("tabsLeftDisabled");this._nextBut.show().removeClass("tabsRightDisabled");this._tabBox.parent().addClass("tabsPageHeaderMargin");if(this._getLeft()>=0){this._prevBut.addClass("tabsLeftDisabled")}else{if(this._getLeft()<=this._getScrollBarW()-a){this._nextBut.addClass("tabsRightDisabled")}}}},_switchTab:function(b){var a=this._getTabs().removeClass("selected").eq(b).addClass("selected");this._getPanels().hide().eq(b).show();this._getMoreLi().removeClass("selected").eq(b).addClass("selected");this._currentIndex=b;this._scrollCurrent();this._reload(a)},_closeTab:function(a){this._getTabs().eq(a).remove();this._getPanels().eq(a).remove();this._getMoreLi().eq(a).remove();if(this._currentIndex>=a){this._currentIndex--}this._init();this._scrollCurrent();this._reload(this._getTabs().eq(this._currentIndex))},closeTab:function(a){var b=this._indexTabId(a);if(b>0){this._closeTab(b)}},closeCurrentTab:function(){if(this._currentIndex>0){this._closeTab(this._currentIndex)}},closeAllTab:function(){this._getTabs().filter(":gt(0)").remove();this._getPanels().filter(":gt(0)").remove();this._getMoreLi().filter(":gt(0)").remove();this._currentIndex=0;this._init();this._scrollCurrent()},_closeOtherTab:function(a){a=a||this._currentIndex;if(a>0){var b=":eq("+a+")";this._getTabs().not(b).filter(":gt(0)").remove();this._getPanels().not(b).filter(":gt(0)").remove();this._getMoreLi().not(b).filter(":gt(0)").remove();this._currentIndex=1;this._init();this._scrollCurrent()}else{this.closeAllTab()}},_loadUrlCallback:function(a){a.find("[layoutH]").layoutH();a.find(":button.close").click(function(){navTab.closeCurrentTab()})},_reload:function(e,a){a=a||e.data("reloadFlag");var b=e.attr("url");if(a&&b){e.data("reloadFlag",null);var f=this._getPanel(e.attr("tabid"));if(e.hasClass("external")){navTab.openExternal(b,f)}else{var d={};var c=$("form#pagerForm",f);if(c.length>0){d=c.serializeArray()}f.loadUrl(b,d,function(){navTab._loadUrlCallback(f)})}}},reloadFlag:function(a){var b=this._getTab(a);if(b){if(this._indexTabId(a)==this._currentIndex){this._reload(b,true)}else{b.data("reloadFlag",1)}}},reload:function(b,a){var e=$.extend({data:{},navTabId:"",callback:null},a);var d=e.navTabId?this._getPanel(e.navTabId):this._getPanels().eq(this._currentIndex);if(d){if(!b){var c=e.navTabId?this._getTab(e.navTabId):this._getTabs().eq(this._currentIndex);b=c.attr("url")}if(b){d.loadUrl(b,e.data,function(f){navTab._loadUrlCallback(d);if($.isFunction(e.callback)){e.callback(f)}})}}},getCurrentPanel:function(){return this._getPanels().eq(this._currentIndex)},checkTimeout:function(){var a=DWZ.jsonEval(this.getCurrentPanel().html());if(a&&a.statusCode==DWZ.statusCode.timeout){this.closeCurrentTab()}},openExternal:function(a,c){var b=navTab._panelBox.height();c.html(DWZ.frag.externalFrag.replaceAll("{url}",a).replaceAll("{height}",b+"px"))},openTab:function(b,c,k){var f=$.extend({title:"New Tab",data:{},fresh:true,external:false},k);var d=this._indexTabId(b);if(d>=0){var h=this._getTabs().eq(d);var a=h.attr("tabid")==this._op.mainTabId?"> span > span":"> span";h.find(">a").attr("title",f.title).find(a).text(f.title);var j=this._getPanels().eq(d);if(f.fresh||h.attr("url")!=c){h.attr("url",c);if(f.external||c.isExternalUrl()){h.addClass("external");navTab.openExternal(c,j)}else{h.removeClass("external");j.ajaxUrl({type:"GET",url:c,data:f.data,callback:function(){navTab._loadUrlCallback(j)}})}}this._currentIndex=d}else{var e='<li tabid="#tabid#"><a href="javascript:" title="#title#"><span>#title#</span></a><a href="javascript:;" class="close">close</a></li>';this._tabBox.append(e.replace("#tabid#",b).replaceAll("#title#",f.title));this._panelBox.append('<div class="page unitBox"></div>');this._moreBox.append('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",f.title));var g=this._getTabs();var h=g.filter(":last");var j=this._getPanels().filter(":last");if(f.external||c.isExternalUrl()){h.addClass("external");navTab.openExternal(c,j)}else{h.removeClass("external");j.ajaxUrl({type:"GET",url:c,data:f.data,callback:function(){navTab._loadUrlCallback(j)}})}if($.History){setTimeout(function(){$.History.addHistory(b,function(l){var m=navTab._indexTabId(l);if(m>=0){navTab._switchTab(m)}},b)},10)}this._currentIndex=g.size()-1;this._contextmenu(g.filter(":last").hoverClass("hover"))}this._init();this._scrollCurrent();this._getTabs().eq(this._currentIndex).attr("url",c)}};(function(a){a.fn.extend({pagination:function(d){var c={first$:"li.j-first",prev$:"li.j-prev",next$:"li.j-next",last$:"li.j-last",nums$:"li.j-num>a",jumpto$:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>'};return this.each(function(){var l=a(this);var n=new b(d);var f=n.getInterval();var o="";for(var k=f.start;k<f.end;k++){o+=c.pageNumFrag.replaceAll("#pageNum#",k).replaceAll("#liClass#",k==n.getCurrentPage()?"selected j-num":"j-num")}l.html(DWZ.frag.pagination.replaceAll("#pageNumFrag#",o).replaceAll("#currentPage#",n.getCurrentPage())).find("li").hoverClass();var j=l.find(c.first$);var g=l.find(c.prev$);var h=l.find(c.next$);var m=l.find(c.last$);if(n.hasPrev()){j.add(g).find(">span").hide();e(g,n.getCurrentPage()-1,n.targetType(),n.rel());e(j,1,n.targetType(),n.rel())}else{j.add(g).addClass("disabled").find(">a").hide()}if(n.hasNext()){h.add(m).find(">span").hide();e(h,n.getCurrentPage()+1,n.targetType(),n.rel());e(m,n.numPages(),n.targetType(),n.rel())}else{h.add(m).addClass("disabled").find(">a").hide()}l.find(c.nums$).each(function(p){e(a(this),p+f.start,n.targetType(),n.rel())});l.find(c.jumpto$).each(function(){var r=a(this);var q=r.find(":text");var p=r.find(":button");p.click(function(s){var t=q.val();if(t&&t.isPositiveInteger()){dwzPageBreak({targetType:n.targetType(),rel:n.rel(),data:{pageNum:t}})}});q.keyup(function(s){if(s.keyCode==DWZ.keyCode.ENTER){p.click()}})})});function e(g,j,h,f){g.bind("click",{pageNum:j},function(k){dwzPageBreak({targetType:h,rel:f,data:{pageNum:k.data.pageNum}});k.preventDefault()})}},orderBy:function(c){var d=a.extend({targetType:"navTab",rel:"",asc:"asc",desc:"desc"},c);return this.each(function(){var e=a(this).css({cursor:"pointer"}).click(function(){var g=e.attr("orderField");var f=e.hasClass(d.asc)?d.desc:d.asc;dwzPageBreak({targetType:d.targetType,rel:d.rel,data:{orderField:g,orderDirection:f}})})})},pagerForm:function(c){var e=a.extend({pagerForm$:"#pagerForm",parentBox:document},c);var d='<input type="hidden" name="#name#" value="#value#" />';return this.each(function(){var f=a(this),g=a(e.pagerForm$,e.parentBox);var h=g.attr("action").replaceAll("#rel#",f.attr("action"));g.attr("action",h);f.find(":input").each(function(){var l=a(this),j=l.attr("name");if(j){var k=d.replaceAll("#name#",j).replaceAll("#value#",l.val());g.append(k)}})})}});var b=function(c){this.opts=a.extend({targetType:"navTab",rel:"",totalCount:0,numPerPage:10,pageNumShown:10,currentPage:1,callback:function(){return false}},c)};a.extend(b.prototype,{targetType:function(){return this.opts.targetType},rel:function(){return this.opts.rel},numPages:function(){return Math.ceil(this.opts.totalCount/this.opts.numPerPage)},getInterval:function(){var e=Math.ceil(this.opts.pageNumShown/2);var f=this.numPages();var d=f-this.opts.pageNumShown;var g=this.getCurrentPage()>e?Math.max(Math.min(this.getCurrentPage()-e,d),0):0;var c=this.getCurrentPage()>e?Math.min(this.getCurrentPage()+e,f):Math.min(this.opts.pageNumShown,f);return{start:g+1,end:c+1}},getCurrentPage:function(){var c=parseInt(this.opts.currentPage);if(isNaN(c)){return 1}return c},hasPrev:function(){return this.getCurrentPage()>1},hasNext:function(){return this.getCurrentPage()<this.numPages()}})})(jQuery);(function(a){a.extend(a.fn,{jPanel:function(b){var c=a.extend({header:"panelHeader",headerC:"panelHeaderContent",content:"panelContent",coll:"collapsable",exp:"expandable",footer:"panelFooter",footerC:"panelFooterContent"},b);return this.each(function(){var o=a(this);var m=o.hasClass("close");var j=o.hasClass("collapse");var e=a(">div",o).addClass(c.content);var k=a(">h1",o).wrap("<div><div></div></div>");if(j){a('<a href=""></a>').addClass(m?c.exp:c.coll).insertAfter(k)}var h=a(">div:first",o).addClass(c.header);a(">div",h).addClass(c.headerC);var l=a("<div><div></div></div>").appendTo(o).addClass(c.footer);a(">div",l).addClass(c.footerC);var f=o.attr("defH")?o.attr("defH"):0;var n=o.attr("minH")?o.attr("minH"):0;if(m){e.css({height:"0px",display:"none"})}else{e.css("height","auto");if(f>0){e.height(f+"px")}else{if(n>0){e.css("minHeight",n+"px")}}}if(!j){return}var d=a("a",h);var g=e.innerHeight()-6;if(n>0&&n>=g){f=n}else{f=g}d.click(function(){if(d.hasClass(c.exp)){e.jBlindDown({to:f,call:function(){d.removeClass(c.exp).addClass(c.coll);if(n>0){e.css("minHeight",n+"px")}}})}else{if(n>0){e.css("minHeight","")}if(n>=g){e.css("height",n+"px")}e.jBlindUp({call:function(){d.removeClass(c.coll).addClass(c.exp)}})}return false})})}})})(jQuery);(function(a){a.extend(a.validator.messages,{required:"必填字段",remote:"请修正该字段",email:"请输入正确格式的电子邮件",url:"请输入合法的网址",date:"请输入合法的日期",dateISO:"请输入合法的日期 (ISO).",number:"请输入合法的数字",digits:"只能输入整数",creditcard:"请输入合法的信用卡号",equalTo:"请再次输入相同的值",accept:"请输入拥有合法后缀名的字符串",maxlength:a.validator.format("长度最多是 {0} 的字符串"),minlength:a.validator.format("长度最少是 {0} 的字符串"),rangelength:a.validator.format("长度介于 {0} 和 {1} 之间的字符串"),range:a.validator.format("请输入一个介于 {0} 和 {1} 之间的值"),max:a.validator.format("请输入一个最大为 {0} 的值"),min:a.validator.format("请输入一个最小为 {0} 的值"),alphanumeric:"字母、数字、下划线",lettersonly:"必须是字母",phone:"数字、空格、括号"});a.setRegional("datepicker",{dayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]});a.setRegional("alertMsg",{title:{error:"错误",info:"提示",warn:"警告",correct:"成功",confirm:"确认提示"},butMsg:{ok:"确定",yes:"是",no:"否",cancel:"取消"}})})(jQuery);(function(a){a.fn.extend({jresize:function(b){if(typeof b=="string"){if(b=="destroy"){return this.each(function(){var c=this;a("div[class^='resizable']",c).each(function(){a(this).hide()})})}}return this.each(function(){var d=a(this);var c=a(".resizable");a("div[class^='resizable']",d).each(function(){var e=this;a(e).mousedown(function(f){a.pdialog.switchDialog(d);a.resizeTool.start(c,d,f,a(e).attr("tar"));return false}).show()})})}});a.resizeTool={start:function(c,b,f,d){a.pdialog.initResize(c,b,d);a.data(c[0],"layer-drag",{options:a.extend(a.pdialog._op,{target:d,dialog:b,stop:a.resizeTool.stop})});a.layerdrag.start(c[0],f,a.pdialog._op)},stop:function(){var b=a.data(arguments[0],"layer-drag");a.pdialog.resizeDialog(arguments[0],b.options.dialog,b.options.target);a("body").css("cursor","");a(arguments[0]).hide()}};a.layerdrag={start:function(d,c,b){if(!a.layerdrag.current){a.layerdrag.current={el:d,oleft:parseInt(d.style.left)||0,owidth:parseInt(d.style.width)||0,otop:parseInt(d.style.top)||0,oheight:parseInt(d.style.height)||0,ox:c.pageX||c.screenX,oy:c.pageY||c.clientY};a(document).bind("mouseup",a.layerdrag.stop);a(document).bind("mousemove",a.layerdrag.drag)}return a.layerdrag.preventEvent(c)},drag:function(k){if(!k){var k=window.event}var j=a.layerdrag.current;var g=a.data(j.el,"layer-drag");var c=(k.pageX||k.screenX)-j.ox;var d=(k.pageY||k.clientY)-j.oy;if((k.pageY||k.clientY)<=0||(k.pageY||k.clientY)>=(a(window).height()-a(".dialogHeader",a(g.options.dialog)).outerHeight())){return false}var h=g.options.target;var f=j.owidth;var b=j.oheight;if(h!="n"&&h!="s"){f+=(h.indexOf("w")>=0)?-c:c}if(f>=a.pdialog._op.minW){if(h.indexOf("w")>=0){j.el.style.left=(j.oleft+c)+"px"}if(h!="n"&&h!="s"){j.el.style.width=f+"px"}}if(h!="w"&&h!="e"){b+=(h.indexOf("n")>=0)?-d:d}if(b>=a.pdialog._op.minH){if(h.indexOf("n")>=0){j.el.style.top=(j.otop+d)+"px"}if(h!="w"&&h!="e"){j.el.style.height=b+"px"}}return a.layerdrag.preventEvent(k)},stop:function(d){var c=a.layerdrag.current;var b=a.data(c.el,"layer-drag");a(document).unbind("mousemove",a.layerdrag.drag);a(document).unbind("mouseup",a.layerdrag.stop);if(b.options.stop){b.options.stop.apply(c.el,[c.el])}a.layerdrag.current=null;return a.layerdrag.preventEvent(d)},preventEvent:function(b){if(b.stopPropagation){b.stopPropagation()}if(b.preventDefault){b.preventDefault()}return false}}})(jQuery);(function(a){a.fn.jTable=function(b){return this.each(function(){var m=a(this),w=m.attr("nowrapTD");var s=m.width();var d=[];var j=m.parent().addClass("j-resizeGrid");var t=a(this).attr("layoutH");var o=m.find("thead>tr:last-child").find("th");for(var u=0,r=o.size();u<r;u++){var g=a(o[u]);var v=[],q=g.innerWidth()-(100*g.innerWidth()/s)-2;v[0]=parseInt(q);v[1]=g.attr("align");d[d.length]=v}a(this).wrap("<div class='grid'></div>");var h=m.parent().html(m.html());var z=h.find("thead");z.wrap("<div class='gridHeader'><div class='gridThead'><table style='width:"+(s-20)+"px;'></table></div></div>");var p=a(">tr:last-child",z);var f=a(">th",p);a("th",z).each(function(){var l=a(this);l.html("<div class='gridCol' title='"+l.text()+"'>"+l.html()+"</div>")});f.each(function(l){var C=a(this),B=d[l];C.addClass(B[1]).hoverClass("hover").removeAttr("align").removeAttr("width").width(B[0])}).filter("[orderField]").orderBy({targetType:m.attr("targetType"),asc:m.attr("asc")||"asc",desc:m.attr("desc")||"desc"});var c=h.find(">tbody");var e=t?" layoutH='"+t+"'":"";c.wrap("<div class='gridScroller'"+e+" style='width:"+j.width()+"px;'><div class='gridTbody'><table style='width:"+(s-20)+"px;'></table></div></div>");var n=a(">tr:first-child",c);var A=c.find(">tr");A.hoverClass().each(function(){var D=a(this);var B=a(">td",this);for(var C=0;C<B.size();C++){var l=a(B[C]);if(w!="false"){l.html("<div>"+l.html()+"</div>")}if(C<d.length){l.addClass(d[C][1])}}D.click(function(){A.filter(".selected").removeClass("selected");D.addClass("selected");var E=D.attr("target");if(E){if(a("#"+E,h).size()==0){h.prepend('<input id="'+E+'" type="hidden" />')}a("#"+E,h).val(D.attr("rel"))}})});a(">td",n).each(function(l){if(l<d.length){a(this).width(d[l][0])}});h.append("<div class='resizeMarker' style='height:300px; left:57px;display:none;'></div><div class='resizeProxy' style='height:300px; left:377px;display:none;'></div>");var x=a(".gridScroller",h);x.scroll(function(B){var C=a(".gridThead",h);if(x.scrollLeft()>0){C.css("position","relative");var l=x.scrollLeft();C.css("left",x.cssv("left")-l)}if(x.scrollLeft()==0){C.css("position","relative");C.css("left","0px")}return false});a(">tr",z).each(function(){a(">th",this).each(function(l){var C=this,B=a(this);B.mouseover(function(D){var E=a.jTableTool.getOffset(C,D).offsetX;if(B.outerWidth()-E<5){B.css("cursor","col-resize").mousedown(function(F){a(".resizeProxy",h).show().css({left:a.jTableTool.getRight(C)-a(".gridScroller",h).scrollLeft(),top:a.jTableTool.getTop(C),height:a.jTableTool.getHeight(C,h),cursor:"col-resize"});a(".resizeMarker",h).show().css({left:a.jTableTool.getLeft(C)+1-a(".gridScroller",h).scrollLeft(),top:a.jTableTool.getTop(C),height:a.jTableTool.getHeight(C,h)});a(".resizeProxy",h).jDrag(a.extend(b,{scop:true,cellMinW:20,relObj:a(".resizeMarker",h)[0],move:"horizontal",event:F,stop:function(){var L=a(".resizeProxy",h).position().left;var O=a(".resizeMarker",h).position().left;var I=L-O-B.outerWidth()-9;var N=a.jTableTool.getColspan(B);var M=a.jTableTool.getCellNum(B);var P=B.width(),G=B.width()+I;var H=a(">td",n).eq(M-1);B.width(G+"px");H.width(G+"px");var K=a(z).parent();K.width((K.width()-P+G)+"px");var J=a(c).parent();J.width((J.width()-P+G)+"px");a(".resizeMarker,.resizeProxy",h).hide()}}))})}else{B.css("cursor",B.attr("orderField")?"pointer":"default");B.unbind("mousedown")}return false})})});function k(){a("div.j-resizeGrid").each(function(){var l=a(this).innerWidth();if(l){a("div.gridScroller",this).width(l+"px")}})}a(window).unbind("resizeGrid").bind("resizeGrid",k)})};a.jTableTool={getLeft:function(c){var b=0;a(c).prevAll().each(function(){b+=a(this).outerWidth()});return b-1},getRight:function(c){var b=0;a(c).prevAll().andSelf().each(function(){b+=a(this).outerWidth()});return b-1},getTop:function(c){var b=0;a(c).parent().prevAll().each(function(){b+=a(this).outerHeight()});return b},getHeight:function(e,d){var b=0;var c=a(e).parent();c.nextAll().andSelf().each(function(){b+=a(this).outerHeight()});a(".gridTbody",d).children().each(function(){b+=a(this).outerHeight()});return b},getCellNum:function(b){return a(b).prevAll().andSelf().size()},getColspan:function(b){return a(b).attr("colspan")||1},getStart:function(b){var c=1;a(b).prevAll().each(function(){c+=parseInt(a(this).attr("colspan")||1)});return c},getPageCoord:function(b){var c={x:0,y:0};while(b){c.x+=b.offsetLeft;c.y+=b.offsetTop;b=b.offsetParent}return c},getOffset:function(h,c){if(a.browser.msie){var d=a(h).offset();var f={offsetX:c.pageX||c.screenX,offsetY:c.pageY||c.screenY};var j={offsetX:f.offsetX-d.left,offsetY:f.offsetY-d.top};return j}var g=c.target;if(g.offsetLeft==undefined){g=g.parentNode}var e=a.jTableTool.getPageCoord(g);var b={x:window.pageXOffset+c.clientX,y:window.pageYOffset+c.clientY};var j={offsetX:b.x-e.x,offsetY:b.y-e.y};return j}}})(jQuery);(function(c){c.fn.navMenu=function(){return this.each(function(){var e=c(this);e.find("li>a").click(function(){var f=c(this);c.post(f.attr("href"),{},function(g){c("#sidebar").find(".accordion").remove().end().append(g).initUI();e.find("li").removeClass("selected");f.parent().addClass("selected")});return false})})};c.fn.switchEnv=function(){var e={cities$:">ul>li",boxTitle$:">a>span"};return this.each(function(){var f=c(this);f.click(function(){if(f.hasClass("selected")){b(f)}else{d(f)}return false});f.find(e.cities$).click(function(){var g=c(this);c.post(g.find(">a").attr("href"),{},function(h){b(f);f.find(e.boxTitle$).html(g.find(">a").html());navTab.closeAllTab();c("#sidebar").find(".accordion").remove().end().append(h).initUI()});return false})})};function d(e){e.addClass("selected");c(document).bind("click",{box:e},a)}function b(e){e.removeClass("selected");c(document).unbind("click",a)}function a(e){b(e.data.box)}})(jQuery);(function(a){a.fn.extend({jTask:function(b){return this.each(function(){var c=a(this);var d=c.attr("id");c.click(function(g){var f=a("body").data(d);if(c.hasClass("selected")){a("a.minimize",f).trigger("click")}else{if(f.is(":hidden")){a.taskBar.restoreDialog(f)}else{a(f).trigger("click")}}a.taskBar.scrollCurrent(a(this));return false});a("div.close",c).click(function(f){a.pdialog.close(d);return false}).hoverClass("closeHover");c.hoverClass("hover")})}});a.taskBar={_taskBar:null,_taskBox:null,_prevBut:null,_nextBut:null,_op:{id:"taskbar",taskBox:"div.taskbarContent",prevBut:".taskbarLeft",prevDis:"taskbarLeftDisabled",nextBut:".taskbarRight",nextDis:"taskbarRightDisabled",selected:"selected",boxMargin:"taskbarMargin"},init:function(b){var c=this;a.extend(this._op,b);this._taskBar=a("#"+this._op.id);if(this._taskBar.size()==0){this._taskBar=a(DWZ.frag.taskbar).appendTo(a("#layout"));this._taskBar.find(".taskbarLeft").hoverClass("taskbarLeftHover");this._taskBar.find(".taskbarRight").hoverClass("taskbarRightHover")}this._taskBox=this._taskBar.find(this._op.taskBox);this._taskList=this._taskBox.find(">ul");this._prevBut=this._taskBar.find(this._op.prevBut);this._nextBut=this._taskBar.find(this._op.nextBut);this._prevBut.click(function(d){c.scrollLeft()});this._nextBut.click(function(d){c.scrollRight()});this._contextmenu(this._taskBox)},_contextmenu:function(b){a(b).contextMenu("dialogCM",{bindings:{closeCurrent:function(d,c){var e=d.isTag("li")?d:a.taskBar._getCurrent();a("div.close",e).trigger("click")},closeOther:function(e,d){var c=e.isTag("li")?("#"+e.attr("id")):".selected";var f=a.taskBar._taskList.find(">li:not(:"+c+")");f.each(function(g){a("div.close",f[g]).trigger("click")})},closeAll:function(d,c){var e=a.taskBar._getTasks();e.each(function(f){a("div.close",e[f]).trigger("click")})}},ctrSub:function(d,c){var e=c.find("[rel='closeCurrent']");var f=c.find("[rel='closeOther']");if(!a.taskBar._getCurrent()[0]){e.addClass("disabled");f.addClass("disabled")}else{if(a.taskBar._getTasks().size()==1){f.addClass("disabled")}}}})},_scrollCurrent:function(){var b=this._tasksW(this._getTasks());if(b>this._getTaskBarW()){var d=this;var e=a(">li:last-child",this._taskList);var c=this._getTaskBarW()-e.position().left-e.outerWidth(true);this._taskList.animate({left:c+"px"},200,function(){d._ctrlScrollBut()})}else{this._ctrlScrollBut()}},_getTaskBarW:function(){return this._taskBox.width()-(this._prevBut.is(":hidden")?this._prevBut.width()+2:0)-(this._nextBut.is(":hidden")?this._nextBut.width()+2:0)},_scrollTask:function(b){var d=this;if(b.position().left+this._getLeft()+b.outerWidth()>this._getBarWidth()){var c=this._getTaskBarW()-b.position().left-b.outerWidth(true)-2;this._taskList.animate({left:c+"px"},200,function(){d._ctrlScrollBut()})}else{if(b.position().left+this._getLeft()<0){var c=this._getLeft()-(b.position().left+this._getLeft());this._taskList.animate({left:c+"px"},200,function(){d._ctrlScrollBut()})}}},_ctrlScrollBut:function(){var b=this._tasksW(this._getTasks());if(this._getTaskBarW()>b){this._taskBox.removeClass(this._op.boxMargin);this._nextBut.hide();this._prevBut.hide();if(this._getTasks().eq(0)[0]){this._scrollTask(this._getTasks().eq(0))}}else{this._taskBox.addClass(this._op.boxMargin);this._nextBut.show().removeClass(this._op.nextDis);this._prevBut.show().removeClass(this._op.prevDis);if(this._getLeft()>=0){this._prevBut.addClass(this._op.prevDis)}if(this._getLeft()<=this._getTaskBarW()-b){this._nextBut.addClass(this._op.nextDis)}}},_getLeft:function(){return this._taskList.position().left},_visibleStart:function(){var d=this._getLeft();var b=this._getTasks();for(var c=0;c<b.size();c++){if(b.eq(c).position().left+b.eq(c).outerWidth(true)+d>=0){return b.eq(c)}}return b.eq(0)},_visibleEnd:function(){var d=this._getLeft();var b=this._getTasks();for(var c=0;c<b.size();c++){if(b.eq(c).position().left+b.eq(c).outerWidth(true)+d>this._getBarWidth()){return b.eq(c)}}return b.eq(b.size()-1)},_getTasks:function(){return this._taskList.find(">li")},_tasksW:function(b){var c=0;b.each(function(){c+=a(this).outerWidth(true)});return c},_getBarWidth:function(){return this._taskBar.innerWidth(true)},addDialog:function(e,d){this.show();var b=a("#"+e,this._taskList);if(!b[0]){var c='<li id="#taskid#"><div class="taskbutton"><span>#title#</span></div><div class="close">Close</div></li>';this._taskList.append(c.replace("#taskid#",e).replace("#title#",d));b=a("#"+e,this._taskList);b.jTask()}else{a(">div>span",b).text(d)}this._contextmenu(b);this.switchTask(e);this._scrollTask(b)},closeDialog:function(c){var b=(typeof c=="string")?a("#"+c,this._taskList):c;b.remove();if(this._getTasks().size()==0){this.hide()}this._scrollCurrent()},restoreDialog:function(d){var c=(typeof d=="string")?a("body").data(d):d;var e=(typeof d=="string")?d:c.data("id");var b=a.taskBar.getTask(e);a(".resizable").css({top:a(window).height()-60,left:a(b).position().left,height:a(b).outerHeight(),width:a(b).outerWidth()}).show().animate({top:a(c).css("top"),left:a(c).css("left"),width:a(c).css("width"),height:a(c).css("height")},250,function(){a(this).hide();a(c).show();a.pdialog.attachShadow(c)});a.taskBar.switchTask(e)},inactive:function(b){a("#"+b,this._taskList).removeClass("selected")},scrollLeft:function(){var b=this._visibleStart();this._scrollTask(b)},scrollRight:function(){var b=this._visibleEnd();this._scrollTask(b)},scrollCurrent:function(b){this._scrollTask(b)},switchTask:function(b){this._getCurrent().removeClass("selected");this.getTask(b).addClass("selected")},_getCurrent:function(){return this._taskList.find(">.selected")},getTask:function(b){return a("#"+b,this._taskList)},show:function(){if(this._taskBar.is(":hidden")){this._taskBar.css("top",a(window).height()-34+this._taskBar.outerHeight()).show();this._taskBar.animate({top:a(window).height()-this._taskBar.outerHeight()},500)}},hide:function(){this._taskBar.animate({top:a(window).height()-29+this._taskBar.outerHeight(true)},500,function(){a.taskBar._taskBar.hide()})}}})(jQuery);(function($){$.extend($.fn,{jTree:function(options){var op=$.extend({checkFn:null,selected:"selected",exp:"expandable",coll:"collapsable",firstExp:"first_expandable",firstColl:"first_collapsable",lastExp:"last_expandable",lastColl:"last_collapsable",folderExp:"folder_expandable",folderColl:"folder_collapsable",endExp:"end_expandable",endColl:"end_collapsable",file:"file",ck:"checked",unck:"unchecked"},options);return this.each(function(){var $this=$(this);var cnum=$this.children().length;$(">li",$this).each(function(){var $li=$(this);var first=$li.prev()[0]?false:true;var last=$li.next()[0]?false:true;$li.genTree({icon:$this.hasClass("treeFolder"),ckbox:$this.hasClass("treeCheck"),options:op,level:0,exp:(cnum>1?(first?op.firstExp:(last?op.lastExp:op.exp)):op.endExp),coll:(cnum>1?(first?op.firstColl:(last?op.lastColl:op.coll)):op.endColl),showSub:(!$this.hasClass("collapse")&&($this.hasClass("expand")||(cnum>1?(first?true:false):true))),isLast:(cnum>1?(last?true:false):true)})});setTimeout(function(){if($this.hasClass("treeCheck")){var checkFn=eval($this.attr("oncheck"));if(checkFn&&$.isFunction(checkFn)){$("div.ckbox",$this).each(function(){var ckbox=$(this);ckbox.click(function(){var checked=$(ckbox).hasClass("checked");var items=[];if(checked){var tnode=$(ckbox).parent().parent();var boxes=$("input",tnode);if(boxes.size()>1){$(boxes).each(function(){items[items.length]={name:$(this).attr("name"),value:$(this).val(),text:$(this).attr("text")}})}else{items={name:boxes.attr("name"),value:boxes.val(),text:boxes.attr("text")}}}checkFn({checked:checked,items:items})})})}}$("a",$this).click(function(event){$("div."+op.selected,$this).removeClass(op.selected);var parent=$(this).parent().addClass(op.selected);$(".ckbox",parent).trigger("click");event.stopPropagation();$(document).trigger("click");if(!$(this).attr("target")){return false}})},1)})},subTree:function(op,level){return this.each(function(){$(">li",this).each(function(){var $this=$(this);setTimeout(function(){var isLast=($this.next()[0]?false:true);$this.genTree({icon:op.icon,ckbox:op.ckbox,exp:isLast?op.options.lastExp:op.options.exp,coll:isLast?op.options.lastColl:op.options.coll,options:op.options,level:level,space:isLast?null:op.space,showSub:op.showSub,isLast:isLast})},1)})})},genTree:function(options){var op=$.extend({icon:options.icon,ckbox:options.ckbox,exp:"",coll:"",showSub:false,level:0,options:null,isLast:false},options);return this.each(function(){var node=$(this);var tree=$(">ul",node);var parent=node.parent().prev();var checked="unchecked";if(op.ckbox){if($(">.checked",parent).size()>0){checked="checked"}}if(tree.size()>0){node.children(":first").wrap("<div></div>");$(">div",node).prepend("<div class='"+(op.showSub?op.coll:op.exp)+"'></div>"+(op.ckbox?"<div class='ckbox "+checked+"'></div>":"")+(op.icon?"<div class='"+(op.showSub?op.options.folderColl:op.options.folderExp)+"'></div>":""));op.showSub?tree.show():tree.hide();$(">div>div:first,>div>a",node).click(function(){var $fnode=$(">li:first",tree);if($fnode.children(":first").isTag("a")){tree.subTree(op,op.level+1)}var $this=$(this);var isA=$this.isTag("a");var $this=isA?$(">div>div",node).eq(op.level):$this;if(!isA||tree.is(":hidden")){$this.toggleClass(op.exp).toggleClass(op.coll);if(op.icon){$(">div>div:last",node).toggleClass(op.options.folderExp).toggleClass(op.options.folderColl)}}(tree.is(":hidden"))?tree.slideDown("fast"):(isA?"":tree.slideUp("fast"));return false});addSpace(op.level,node);if(op.showSub){tree.subTree(op,op.level+1)}}else{node.children().wrap("<div></div>");$(">div",node).prepend("<div class='node'></div>"+(op.ckbox?"<div class='ckbox "+checked+"'></div>":"")+(op.icon?"<div class='file'></div>":""));addSpace(op.level,node);if(op.isLast){$(node).addClass("last")}}if(op.ckbox){node._check(op)}$(">div",node).mouseover(function(){$(this).addClass("hover")}).mouseout(function(){$(this).removeClass("hover")});if($.browser.msie){$(">div",node).click(function(){$("a",this).trigger("click");return false})}});function addSpace(level,node){if(level>0){var parent=node.parent().parent();var space=!parent.next()[0]?"indent":"line";var plist="<div class='"+space+"'></div>";if(level>1){var next=$(">div>div",parent).filter(":first");var prev="";while(level>1){prev=prev+"<div class='"+next.attr("class")+"'></div>";next=next.next();level--}plist=prev+plist}$(">div",node).prepend(plist)}}},_check:function(op){var node=$(this);var ckbox=$(">div>.ckbox",node);var $input=node.find("a");var tname=$input.attr("tname"),tvalue=$input.attr("tvalue");var attrs="text='"+$input.text()+"' ";if(tname){attrs+="name='"+tname+"' "}if(tvalue){attrs+="value='"+tvalue+"' "}ckbox.append("<input type='checkbox' style='display:none;' "+attrs+"/>").click(function(){var cked=ckbox.hasClass("checked");var aClass=cked?"unchecked":"checked";var rClass=cked?"checked":"unchecked";ckbox.removeClass(rClass).removeClass(!cked?"indeterminate":"").addClass(aClass);$("input",ckbox).attr("checked",!cked);$(">ul",node).find("li").each(function(){var box=$("div.ckbox",this);box.removeClass(rClass).removeClass(!cked?"indeterminate":"").addClass(aClass).find("input").attr("checked",!cked)});$(node)._checkParent();return false});var cAttr=$input.attr("checked");if(cAttr){cAttr=eval(cAttr)}if(cAttr){ckbox.find("input").attr("checked",true);ckbox.removeClass("unchecked").addClass("checked");$(node)._checkParent()}},_checkParent:function(){if($(this).parent().hasClass("tree")){return}var parent=$(this).parent().parent();var stree=$(">ul",parent);var ckbox=stree.find(">li>a").size()+stree.find("div.ckbox").size();var ckboxed=stree.find("div.checked").size();var aClass=(ckboxed==ckbox?"checked":(ckboxed!=0?"indeterminate":"unchecked"));var rClass=(ckboxed==ckbox?"indeterminate":(ckboxed!=0?"checked":"indeterminate"));$(">div>.ckbox",parent).removeClass("unchecked").removeClass("checked").removeClass(rClass).addClass(aClass);parent._checkParent()}})})(jQuery);function initEnv(){$("body").append(DWZ.frag.dwzFrag);if($.browser.msie&&/6.0/.test(navigator.userAgent)){try{document.execCommand("BackgroundImageCache",false,true)}catch(b){}}if($.browser.msie){window.setInterval("CollectGarbage();",10000)}$(window).resize(function(){initLayout();$(this).trigger("resizeGrid")});var a=$("#background,#progressBar");a.hide();$(document).ajaxStart(function(){a.show()}).ajaxStop(function(){a.hide()});$("#leftside").jBar({minW:150,maxW:700});if($.taskBar){$.taskBar.init()}navTab.init();if($.fn.switchEnv){$("#switchEnvBox").switchEnv()}if($.fn.navMenu){$("#navMenu").navMenu()}setTimeout(function(){initLayout();initUI();var c=$("div.tabsPageHeader");c.find(".tabsLeft").hoverClass("tabsLeftHover");c.find(".tabsRight").hoverClass("tabsRightHover");c.find(".tabsMore").hoverClass("tabsMoreHover")},10)}function initLayout(){var b=$(window).width()-(DWZ.ui.sbar?$("#sidebar").width()+10:34)-5;var a=$(window).height()-$("#header").height()-34;$("#layout").width($(window).width());$("#container").width(b);$("#container .tabsPageContent").height(a-34).find("[layoutH]").layoutH();$("#sidebar, #sidebar_s .collapse, #splitBar, #splitBarProxy").height(a-5);$("#taskbar").css({top:a+$("#header").height()+5,width:$(window).width()})}function initUI(_box){var $p=$(_box||document);$("table.table",$p).jTable();$("table.list",$p).cssTable();$("div.tabs",$p).each(function(){var $this=$(this);var options={};options.currentIndex=$this.attr("currentIndex")||0;options.eventType=$this.attr("eventType")||"click";$this.tabs(options)});$("ul.tree",$p).jTree();$("div.accordion",$p).each(function(){var $this=$(this);$this.accordion({fillSpace:$this.attr("fillSpace"),alwaysOpen:true,active:0})});$(":button.checkboxCtrl, :checkbox.checkboxCtrl",$p).checkboxCtrl($p);if($.fn.combox){$("select.combox",$p).combox()}if(typeof KindEditor=="undefined"){$.getScript("./admin/keditor/kindeditor-min.js",function(){$("textarea.editor",$p).each(function(){var $this=$(this);KindEditor.create("textarea.editor",{cssPath:"css/global.css",uploadJson:"admin.php?r=site/editorupload",fileManagerJson:"admin.php?r=site/editorfilemanager",allowFileManager:true,afterCreate:function(){var self=this;$this.parents("form").bind("beforeSubmit",function(){self.sync();return false})}})})})}else{$("textarea.editor",$p).each(function(){var $this=$(this);KindEditor.create("textarea.editor",{cssPath:"css/global.css",uploadJson:"admin.php?r=site/editorupload",fileManagerJson:"admin.php?r=site/editorfilemanager",allowFileManager:true,afterCreate:function(){var self=this;$this.parents("form").bind("beforeSubmit",function(){self.sync();return false})}})})}if($.fn.uploadify){$(":file[uploader]",$p).each(function(){var $this=$(this);var options={uploader:$this.attr("uploader"),script:$this.attr("script"),cancelImg:$this.attr("cancelImg"),queueID:$this.attr("fileQueue")||"fileQueue",fileDesc:$this.attr("fileDesc")||"*.jpg;*.jpeg;*.gif;*.png;*.pdf",fileExt:$this.attr("fileExt")||"*.jpg;*.jpeg;*.gif;*.png;*.pdf",folder:$this.attr("folder"),auto:true,multi:true,onError:uploadifyError,onComplete:uploadifyComplete,onAllComplete:uploadifyAllComplete};if(!$this.attr("autoUpload")){options.auto=false;var uploadBtn=$("<a />").attr("href","#").text("上传").click(function(){$this.uploadifyUpload()});uploadBtn.before("\\&nbsp;\\&nbsp;\\&nbsp;\\&nbsp;");$this.after(uploadBtn)}if($this.attr("onComplete")){options.onComplete=DWZ.jsonEval($this.attr("onComplete"))}if($this.attr("onAllComplete")){options.onAllComplete=DWZ.jsonEval($this.attr("onAllComplete"))}if($this.attr("scriptData")){options.scriptData=DWZ.jsonEval($this.attr("scriptData"))}$this.uploadify(options)})}$("input[type=text], input[type=password], textarea",$p).addClass("textInput").focusClass("focus");$("input[readonly], textarea[readonly]",$p).addClass("readonly");$("input[disabled=true], textarea[disabled=true]",$p).addClass("disabled");$("input[type=text]",$p).not("div.tabs input[type=text]",$p).filter("[alt]").inputAlert();$("div.panelBar li, div.panelBar",$p).hoverClass("hover");$("div.button",$p).hoverClass("buttonHover");$("div.buttonActive",$p).hoverClass("buttonActiveHover");$("div.tabsHeader li, div.tabsPageHeader li, div.accordionHeader, div.accordion",$p).hoverClass("hover");$("div.panel",$p).jPanel();$("form.required-validate",$p).each(function(){$(this).validate({focusInvalid:false,focusCleanup:true,errorElement:"span",ignore:".ignore",invalidHandler:function(form,validator){var errors=validator.numberOfInvalids();if(errors){var message=DWZ.msg("validateFormError",[errors]);alertMsg.error(message)}}})});if($.fn.datepicker){$("input.date",$p).each(function(){var $this=$(this);var opts={};if($this.attr("format")){opts.pattern=$this.attr("format")}if($this.attr("yearstart")){opts.yearstart=$this.attr("yearstart")}if($this.attr("yearend")){opts.yearend=$this.attr("yearend")}$this.datepicker(opts)})}$("a[target=navTab]",$p).each(function(){$(this).click(function(event){var $this=$(this);var a=$this.attr("a");if(a!=null){alertMsg.confirm(a,{okCall:function(){_doAlert()}})}else{_doAlert()}return false;function _doAlert(){var title=$this.attr("title")||$this.text();var tabid=$this.attr("rel")||"_blank";var fresh=eval($this.attr("fresh")||"true");var external=eval($this.attr("external")||"false");var url=unescape($this.attr("href")).replaceTmById($p);DWZ.debug(url);if(!url.isFinishedTm()){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}navTab.openTab(tabid,url,{title:title,fresh:fresh,external:external});event.preventDefault()}})});$("a[target=ajaxTodo]",$p).each(function(){$(this).click(function(event){var $this=$(this);var url=unescape($this.attr("href")).replaceTmById($p);DWZ.debug(url);if(!url.isFinishedTm()){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}var title=$this.attr("title");if(title){alertMsg.confirm(title,{okCall:function(){ajaxTodo(url,$this.attr("callback"))}})}else{ajaxTodo(url,$this.attr("callback"))}event.preventDefault()})});$("a[target=dialog]",$p).each(function(){$(this).click(function(event){var $this=$(this);var title=$this.attr("title")||$this.text();var rel=$this.attr("rel")||"_blank";var options={};var w=$this.attr("width");var h=$this.attr("height");if(w){options.width=w}if(h){options.height=h}options.max=eval($this.attr("max")||"false");options.mask=eval($this.attr("mask")||"false");options.maxable=eval($this.attr("maxable")||"true");options.minable=eval($this.attr("minable")||"true");options.fresh=eval($this.attr("fresh")||"true");options.resizable=eval($this.attr("resizable")||"true");options.drawable=eval($this.attr("drawable")||"true");options.close=eval($this.attr("close")||"");options.param=$this.attr("param")||"";var url=unescape($this.attr("href")).replaceTmById($p);DWZ.debug(url);if(!url.isFinishedTm()){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}$.pdialog.open(url,rel,title,options);return false})});$("a[target=ajax]",$p).each(function(){$(this).click(function(event){var $this=$(this);var rel=$this.attr("rel");var callback=$this.attr("callback");if(rel){$("#"+rel).loadUrl($this.attr("href"),{},function(){eval(callback)})}event.preventDefault()})});$("div.pagination",$p).each(function(){var $this=$(this);$this.pagination({targetType:$this.attr("targetType"),totalCount:$this.attr("totalCount"),numPerPage:$this.attr("numPerPage"),pageNumShown:$this.attr("pageNumShown"),currentPage:$this.attr("currentPage")})});if($.fn.lookup){$("a[lookupName]",$p).lookup()}if($.fn.suggest){$("input[suggestFields]",$p).suggest()}if($.fn.itemDetail){$("table[itemDetail]",$p).itemDetail()}if($.fn.selectedTodo){$("a[target=selectedTodo]",$p).selectedTodo()}if($.fn.pagerForm){$("form[rel=pagerForm]",$p).pagerForm({parentBox:$p})}if($.fn.dwzExport){$("a[target=dwzExport]",$p).dwzExport()}if($.fn.ajaxTodo){$("a[target=ajaxTodo]",$p).ajaxTodo()}$("span.changeBtn",$p).each(function(){$(this).click(function(){change(this,$(this).attr("url"))})});$("a.reUpload",$p).each(function(){$(this).click(function(event){reUpload(this,event)})});$("a.showmap",$p).each(function(){$(this).click(function(event){showMap(this)})})}function closedialog(a){alert(a.msg);return true}(function(){var a=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");var f=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");function d(h){return(h<0||h>9?"":"0")+h}function c(Q,N){N=N+"";var t="";var C=0;var P="";var o="";var r=Q.getYear()+"";var p=Q.getMonth()+1;var O=Q.getDate();var v=Q.getDay();var u=Q.getHours();var F=Q.getMinutes();var x=Q.getSeconds();var A,B,l,z,R,n,L,J,G,w,T,u,S,q,j,I;var D={};if(r.length<4){r=""+(r-0+1900)}D.y=""+r;D.yyyy=r;D.yy=r.substring(2,4);D.M=p;D.MM=d(p);D.MMM=a[p-1];D.NNN=a[p+11];D.d=O;D.dd=d(O);D.E=f[v+7];D.EE=f[v];D.H=u;D.HH=d(u);if(u==0){D.h=12}else{if(u>12){D.h=u-12}else{D.h=u}}D.hh=d(D.h);if(u>11){D.K=u-12}else{D.K=u}D.k=u+1;D.KK=d(D.K);D.kk=d(D.k);if(u>11){D.a="PM"}else{D.a="AM"}D.m=F;D.mm=d(F);D.s=x;D.ss=d(x);while(C<N.length){P=N.charAt(C);o="";while((N.charAt(C)==P)&&(C<N.length)){o+=N.charAt(C++)}if(D[o]!=null){t+=D[o]}else{t+=o}}return t}function e(h){return(new RegExp(/^\d+$/).test(h))}function b(n,l,m,k){for(var h=k;h>=m;h--){var j=n.substring(l,l+h);if(j.length<m){return null}if(e(j)){return j}}return null}function g(D,u){D=D+"";u=u+"";var C=0;var q=0;var w="";var l="";var B="";var n,m;var h=new Date();var o=h.getYear();var A=h.getMonth()+1;var z=1;var j=h.getHours();var v=h.getMinutes();var s=h.getSeconds();var p="";while(q<u.length){w=u.charAt(q);l="";while((u.charAt(q)==w)&&(q<u.length)){l+=u.charAt(q++)}if(l=="yyyy"||l=="yy"||l=="y"){if(l=="yyyy"){n=4;m=4}if(l=="yy"){n=2;m=2}if(l=="y"){n=2;m=4}o=b(D,C,n,m);if(o==null){return 0}C+=o.length;if(o.length==2){if(o>70){o=1900+(o-0)}else{o=2000+(o-0)}}}else{if(l=="MMM"||l=="NNN"){A=0;for(var t=0;t<a.length;t++){var k=a[t];if(D.substring(C,C+k.length).toLowerCase()==k.toLowerCase()){if(l=="MMM"||(l=="NNN"&&t>11)){A=t+1;if(A>12){A-=12}C+=k.length;break}}}if((A<1)||(A>12)){return 0}}else{if(l=="EE"||l=="E"){for(var t=0;t<f.length;t++){var r=f[t];if(D.substring(C,C+r.length).toLowerCase()==r.toLowerCase()){C+=r.length;break}}}else{if(l=="MM"||l=="M"){A=b(D,C,l.length,2);if(A==null||(A<1)||(A>12)){return 0}C+=A.length}else{if(l=="dd"||l=="d"){z=b(D,C,l.length,2);if(z==null||(z<1)||(z>31)){return 0}C+=z.length}else{if(l=="hh"||l=="h"){j=b(D,C,l.length,2);if(j==null||(j<1)||(j>12)){return 0}C+=j.length}else{if(l=="HH"||l=="H"){j=b(D,C,l.length,2);if(j==null||(j<0)||(j>23)){return 0}C+=j.length}else{if(l=="KK"||l=="K"){j=b(D,C,l.length,2);if(j==null||(j<0)||(j>11)){return 0}C+=j.length}else{if(l=="kk"||l=="k"){j=b(D,C,l.length,2);if(j==null||(j<1)||(j>24)){return 0}C+=j.length;j--}else{if(l=="mm"||l=="m"){v=b(D,C,l.length,2);if(v==null||(v<0)||(v>59)){return 0}C+=v.length}else{if(l=="ss"||l=="s"){s=b(D,C,l.length,2);if(s==null||(s<0)||(s>59)){return 0}C+=s.length}else{if(l=="a"){if(D.substring(C,C+2).toLowerCase()=="am"){p="AM"}else{if(D.substring(C,C+2).toLowerCase()=="pm"){p="PM"}else{return 0}}C+=2}else{if(D.substring(C,C+l.length)!=l){return 0}else{C+=l.length}}}}}}}}}}}}}}if(C!=D.length){return 0}if(A==2){if(((o%4==0)&&(o%100!=0))||(o%400==0)){if(z>29){return 0}}else{if(z>28){return 0}}}if((A==4)||(A==6)||(A==9)||(A==11)){if(z>30){return 0}}if(j<12&&p=="PM"){j=j-0+12}else{if(j>11&&p=="AM"){j-=12}}return new Date(o,A-1,z,j,v,s)}Date.prototype.formatDate=function(h){return c(this,h)};String.prototype.parseDate=function(h){return g(this,h)}})();(function(a){if(a.validator){a.validator.addMethod("alphanumeric",function(c,b){return this.optional(b)||/^\w+$/i.test(c)},"Letters, numbers or underscores only please");a.validator.addMethod("lettersonly",function(c,b){return this.optional(b)||/^[a-z]+$/i.test(c)},"Letters only please");a.validator.addMethod("phone",function(c,b){return this.optional(b)||/^[0-9 \(\)]{7,30}$/.test(c)},"Please specify a valid phone number");a.validator.addMethod("postcode",function(c,b){return this.optional(b)||/^[0-9 A-Za-z]{5,20}$/.test(c)},"Please specify a valid postcode");a.validator.addMethod("date",function(d,b){d=d.replace(/\s+/g,"");if(String.prototype.parseDate){var e=a(b);var c=e.attr("format")||"yyyy-MM-dd";return !e.val()||e.val().parseDate(c)}else{return this.optional(b)||d.match(/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/)}},"Please enter a valid date.");a.validator.addClassRules({date:{date:true},alphanumeric:{alphanumeric:true},lettersonly:{lettersonly:true},phone:{phone:true},postcode:{postcode:true}});a.validator.setDefaults({errorElement:"span"});a.validator.autoCreateRanges=true}})(jQuery);(function(g){var c=new Map();g.dwz=g.dwz||{};g(window).resize(function(){setTimeout(function(){for(var j=0;j<c.size();j++){d(c.element(j).key)}},100)});g.fn.extend({accordion:function(k,l){var j=Array.prototype.slice.call(arguments,1);return this.each(function(){if(k.fillSpace){c.put(k.fillSpace,this)}if(typeof k=="string"){var m=g.data(this,"dwz-accordion");m[k].apply(m,j)}else{if(!g(this).is(".dwz-accordion")){g.data(this,"dwz-accordion",new g.dwz.accordion(this,k))}}})},activate:function(j){return this.accordion("activate",j)}});g.dwz.accordion=function(j,k){this.options=k=g.extend({},g.dwz.accordion.defaults,k);this.element=j;g(j).addClass("dwz-accordion");if(k.navigation){var m=g(j).find("a").filter(k.navigationFilter);if(m.length){if(m.filter(k.header).length){k.active=m}else{k.active=m.parent().parent().prev();m.addClass("current")}}}k.headers=g(j).find(k.header);k.active=e(k.headers,k.active);if(k.fillSpace){d(k.fillSpace)}else{if(k.autoheight){var l=0;k.headers.next().each(function(){l=Math.max(l,g(this).outerHeight())}).height(l)}}k.headers.not(k.active||"").next().hide();k.active.find("h2").addClass(k.selectedClass);if(k.event){g(j).bind((k.event)+".dwz-accordion",h)}};g.dwz.accordion.prototype={activate:function(j){h.call(this.element,{target:e(this.options.headers,j)[0]})},enable:function(){this.options.disabled=false},disable:function(){this.options.disabled=true},destroy:function(){this.options.headers.next().css("display","");if(this.options.fillSpace||this.options.autoheight){this.options.headers.next().css("height","")}g.removeData(this.element,"dwz-accordion");g(this.element).removeClass("dwz-accordion").unbind(".dwz-accordion")}};function b(k,j){return function(){return k.apply(j,arguments)}}function f(l){if(!g.data(this,"dwz-accordion")){return}var j=g.data(this,"dwz-accordion");var k=j.options;k.running=l?0:--k.running;if(k.running){return}if(k.clearStyle){k.toShow.add(k.toHide).css({height:"",overflow:""})}g(this).triggerHandler("change.dwz-accordion",[k.data],k.change)}function d(k){var n=c.get(k);if(!n){return}var l=g(n).parent();var j=l.height()-((g(".accordionHeader",n).size())*(g(".accordionHeader:first-child",n).outerHeight()))-2;var m=l.children().not(n);g.each(m,function(o){j-=g(m[o]).outerHeight()});g(".accordionContent",n).height(j)}function a(j,n,o,m,p){var l=g.data(this,"dwz-accordion").options;l.toShow=j;l.toHide=n;l.data=o;var k=b(f,this);l.running=n.size()==0?j.size():n.size();if(l.animated){if(!l.alwaysOpen&&m){g.dwz.accordion.animations[l.animated]({toShow:jQuery([]),toHide:n,complete:k,down:p,autoheight:l.autoheight})}else{g.dwz.accordion.animations[l.animated]({toShow:j,toHide:n,complete:k,down:p,autoheight:l.autoheight})}}else{if(!l.alwaysOpen&&m){j.toggle()}else{n.hide();j.show()}k(true)}}function h(o){var m=g.data(this,"dwz-accordion").options;if(m.disabled){return false}if(!o.target&&!m.alwaysOpen){m.active.find("h2").toggleClass(m.selectedClass);var l=m.active.next(),p={instance:this,options:m,newHeader:jQuery([]),oldHeader:m.active,newContent:jQuery([]),oldContent:l},j=m.active=g([]);a.call(this,j,l,p);return false}var n=g(o.target);if(n.parents(m.header).length){while(!n.is(m.header)){n=n.parent()}}var k=n[0]==m.active[0];if(m.running||(m.alwaysOpen&&k)){return false}if(!n.is(m.header)){return}m.active.find("h2").toggleClass(m.selectedClass);if(!k){n.find("h2").addClass(m.selectedClass)}var j=n.next(),l=m.active.next(),p={instance:this,options:m,newHeader:n,oldHeader:m.active,newContent:j,oldContent:l},q=m.headers.index(m.active[0])>m.headers.index(n[0]);m.active=k?g([]):n;a.call(this,j,l,p,k,q);return false}function e(k,j){return j!=undefined?typeof j=="number"?k.filter(":eq("+j+")"):k.not(k.not(j)):j===false?g([]):k.filter(":eq(0)")}g.extend(g.dwz.accordion,{defaults:{selectedClass:"collapsable",alwaysOpen:true,animated:"slide",event:"click",header:".accordionHeader",autoheight:true,running:0,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(j,l){j=g.extend({easing:"swing",duration:300},j,l);if(!j.toHide.size()){j.toShow.animate({height:"show"},j);return}var k=j.toHide.height(),m=j.toShow.height(),n=m/k;j.toShow.css({height:0}).show();j.toHide.filter(":hidden").each(j.complete).end().filter(":visible").animate({height:"hide"},{step:function(o){var p=(k-o)*n;if(g.browser.msie||g.browser.opera){p=Math.ceil(p)}j.toShow.height(p)},duration:j.duration,easing:j.easing,complete:function(){if(!j.autoheight){j.toShow.css("height","auto")}j.complete()}})},bounceslide:function(j){this.slide(j,{easing:j.down?"bounceout":"swing",duration:j.down?1000:200})},easeslide:function(j){this.slide(j,{easing:"easeinout",duration:700})}}})})(jQuery);function validateCallback(b,c){var a=$(b);if(!a.valid()){return false}$.ajax({type:b.method||"POST",url:a.attr("action"),data:a.serializeArray(),dataType:"json",cache:false,success:c||DWZ.ajaxDone,error:DWZ.ajaxError});return false}function iframeCallback(b,d){var a=$(b),c=$("#callbackframe");if(!a.valid()){return false}if(c.size()==0){c=$("<iframe id='callbackframe' name='callbackframe' src='about:blank' style='display:none'></iframe>").appendTo("body")}if(!b.ajax){a.append('<input type="hidden" name="ajax" value="1" />')}b.target="callbackframe";_iframeResponse(c[0],d||DWZ.ajaxDone)}function _iframeResponse(a,d){var b=$(a),c=$(document);c.trigger("ajaxStart");b.bind("load",function(){b.unbind("load");c.trigger("ajaxStop");if(a.src=="javascript:'%3Chtml%3E%3C/html%3E';"||a.src=="javascript:'<html></html>';"){return}var h=a.contentDocument||a.document;if(h.readyState&&h.readyState!="complete"){return}if(h.body&&h.body.innerHTML=="false"){return}var f;if(h.XMLDocument){f=h.XMLDocument}else{if(h.body){try{f=b.contents().find("body").html();f=jQuery.parseJSON(f)}catch(g){f=h.body.innerHTML}}else{f=h}}d(f)})}function navTabAjaxDone(a){DWZ.ajaxDone(a);if(a.statusCode==DWZ.statusCode.ok){if(a.navTabId){navTab.reloadFlag(a.navTabId)}else{navTabPageBreak({},a.rel)}if("closeCurrent"==a.callbackType){setTimeout(function(){navTab.closeCurrentTab()},100)}else{if("forward"==a.callbackType){navTab.reload(a.forwardUrl)}}}}function dialogAjaxDone(a){DWZ.ajaxDone(a);if(a.statusCode==DWZ.statusCode.ok){if(a.navTabId){var c={};if(a.navTabId){var b=$("form#pagerForm",navTab.getPanel(a.navTabId));if(b.length>0){c=b.serializeArray()}}navTab.reload(a.forwardUrl,{navTabId:a.navTabId,data:c})}else{if(a.rel){navTabPageBreak({},a.rel)}}$.pdialog.closeCurrent()}}function navTabSearch(c,b){var a=$(c);if(c[DWZ.pageInfo.pageNum]){c[DWZ.pageInfo.pageNum].value=1}navTab.reload(a.attr("action"),{data:a.serializeArray(),navTabId:b});return false}function dialogSearch(b){var a=$(b);if(b[DWZ.pageInfo.pageNum]){b[DWZ.pageInfo.pageNum].value=1}$.pdialog.reload(a.attr("action"),{data:a.serializeArray()});return false}function dwzSearch(a,b){if(b=="dialog"){dialogSearch(a)}else{navTabSearch(a)}return false}function divSearch(c,a){var b=$(c);if(c[DWZ.pageInfo.pageNum]){c[DWZ.pageInfo.pageNum].value=1}if(a){var d=$("#"+a);d.ajaxUrl({type:"POST",url:b.attr("action"),data:b.serializeArray(),callback:function(){d.find("[layoutH]").layoutH()}})}return false}function _getPagerForm(c,a){var b=$("#pagerForm",c).get(0);if(b){if(a.pageNum){b[DWZ.pageInfo.pageNum].value=a.pageNum}if(a.numPerPage){b[DWZ.pageInfo.numPerPage].value=a.numPerPage}if(a.orderField){b[DWZ.pageInfo.orderField].value=a.orderField}if(a.orderDirection&&b[DWZ.pageInfo.orderDirection]){b[DWZ.pageInfo.orderDirection].value=a.orderDirection}}return b}function dwzPageBreak(a){var f=$.extend({targetType:"navTab",rel:"",data:{pageNum:"",numPerPage:"",orderField:"",orderDirection:""},callback:null},a);var d=f.targetType=="dialog"?$.pdialog.getCurrent():navTab.getCurrentPanel();if(f.rel){var c=d.find("#"+f.rel);var b=_getPagerForm(c,f.data);if(b){c.ajaxUrl({type:"POST",url:$(b).attr("action"),data:$(b).serializeArray(),callback:function(){c.find("[layoutH]").layoutH()}})}}else{var b=_getPagerForm(d,f.data);var e=$(b).serializeArray();if(f.targetType=="dialog"){if(b){$.pdialog.reload($(b).attr("action"),{data:e,callback:ops.callback})}}else{if(b){navTab.reload($(b).attr("action"),{data:e,callback:f.callback})}}}}function navTabPageBreak(b,a){dwzPageBreak({targetType:"navTab",rel:a,data:b})}function dialogPageBreak(b,a){dwzPageBreak({targetType:"dialog",rel:a,data:b})}function ajaxTodo(url,callback){var $callback=callback||navTabAjaxDone;if(!$.isFunction($callback)){$callback=eval("("+callback+")")}$.ajax({type:"POST",url:url,dataType:"json",cache:false,success:$callback,error:DWZ.ajaxError})}function uploadifyAllComplete(a,b){if(b.errors){var c="The total number of files uploaded: "+b.filesUploaded+"\nThe total number of errors while uploading: "+b.errors+"\nThe total number of bytes uploaded: "+b.allBytesLoaded+"\nThe average speed of all uploaded files: "+b.speed;alert("event:"+a+"\n"+c)}}function uploadifyComplete(d,b,c,a,e){DWZ.ajaxDone(DWZ.jsonEval(a))}function uploadifyError(d,a,c,b){alert("event:"+d+"\nqueueId:"+a+"\nfileObj.name:"+c.name+"\nerrorObj.type:"+b.type+"\nerrorObj.info:"+b.info)}$.fn.extend({ajaxTodo:function(a){return this.each(function(){var b=$(this);b.click(function(e){var c=b.attr("end");var d=unescape(b.attr("href")).replaceTmById($(e.target).parents(".unitBox:first"));DWZ.debug(d);if(!d.isFinishedTm()){alertMsg.error(b.attr("warn")||DWZ.msg("alertSelectMsg"));return false}var f=b.attr("title");if(f){alertMsg.confirm(f,{okCall:function(){if(c){var g=b.attr("tabId");navTab.closeTab(g)}ajaxTodo(d,b.attr("callback"))}})}else{ajaxTodo(d,b.attr("callback"))}e.preventDefault()})})},dwzExport:function(a){function c(d,f){var e="";var g=f=="dialog"?$.pdialog.getCurrent():navTab.getCurrentPanel();g.find("input:checked").filter("[name='"+d+"']").each(function(h){var j=$(this).val();e+=h==0?j:","+j});return e}function b(f,e){if(!e){var d=f.attr("href");window.open(d)}else{var d=f.attr("href");window.open(d+"&id="+e)}}return this.each(function(){var e=$(this);var d=e.attr("rel")||"ids";e.click(function(h){var g=c(d,e.attr("targetType"));var f=e.attr("rel");if(!g&&f!="all"){alertMsg.error(e.attr("warn")||DWZ.msg("alertSelectMsg"));return false}var j=e.attr("title");if(j){alertMsg.confirm(j,{okCall:function(){b(e,g)}})}else{b(e,g)}h.preventDefault();return false})})}});$.setRegional("alertMsg",{title:{error:"Error",info:"Information",warn:"Warning",correct:"Successful",confirm:"Confirmation"},butMsg:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"}});var alertMsg={_boxId:"#alertMsgBox",_bgId:"#alertBackground",_closeTimer:null,_types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},_getTitle:function(a){return $.regional.alertMsg.title[a]},_open:function(e,g,f){$(this._boxId).remove();var a="";if(f){for(var d=0;d<f.length;d++){var c=f[d].call?"callback":"";a+=DWZ.frag.alertButFrag.replace("#butMsg#",f[d].name).replace("#callback#",c)}}var h=DWZ.frag.alertBoxFrag.replace("#type#",e).replace("#title#",this._getTitle(e)).replace("#message#",g).replace("#butFragment#",a);$(h).appendTo("body").css({top:-$(this._boxId).height()+"px"}).animate({top:"0px"},500);if(this._closeTimer){clearTimeout(this._closeTimer);this._closeTimer=null}if(this._types.info==e||this._types.correct==e){this._closeTimer=setTimeout(function(){alertMsg.close()},3500)}else{$(this._bgId).show()}var b=$(this._boxId).find("[rel=callback]");for(var d=0;d<f.length;d++){if(f[d].call){b.eq(d).click(f[d].call)}}},close:function(){$(this._boxId).animate({top:-$(this._boxId).height()},500,function(){$(this).remove()});$(this._bgId).hide()},error:function(b,a){this._alert(this._types.error,b,a)},info:function(b,a){this._alert(this._types.info,b,a)},warn:function(b,a){this._alert(this._types.warn,b,a)},correct:function(b,a){this._alert(this._types.correct,b,a)},_alert:function(b,d,a){var e={okName:$.regional.alertMsg.butMsg.ok,okCall:null};$.extend(e,a);var c=[{name:e.okName,call:e.okCall}];this._open(b,d,c)},confirm:function(c,a){var d={okName:$.regional.alertMsg.butMsg.ok,okCall:null,cancelName:$.regional.alertMsg.butMsg.cancel,cancelCall:null};$.extend(d,a);var b=[{name:d.okName,call:d.okCall},{name:d.cancelName,call:d.cancelCall}];this._open(this._types.confirm,c,b)}};(function(a){a.fn.cssv=function(b){var c=a(this).css(b);return c.substring(0,c.indexOf("px"))*1};a.fn.jBar=function(b){var c=a.extend({container:"#container",collapse:".collapse",toggleBut:".toggleCollapse div",sideBar:"#sidebar",sideBar2:"#sidebar_s",splitBar:"#splitBar",splitBar2:"#splitBarProxy"},b);return this.each(function(){var f=this;var d=a(c.sideBar2,f);var e=a(c.sideBar,f);a(c.toggleBut,e).click(function(){DWZ.ui.sbar=false;a(c.splitBar).hide();var k=d.cssv("left")+d.outerWidth();var g=k-e.outerWidth();var j=a(c.container).cssv("left")-(e.outerWidth()-d.outerWidth());var h=e.outerWidth()-d.outerWidth()+a(c.container).outerWidth();a(c.container).animate({left:j,width:h},50,function(){e.animate({left:g},500,function(){e.hide();d.show().css("left",-50).animate({left:5},200);a(window).trigger("resizeGrid")})});a(c.collapse,d).click(function(){var m=d.cssv("left")+d.outerWidth();if(e.is(":hidden")){a(c.toggleBut,e).hide();e.show().animate({left:m},500);a(c.container).click(l)}else{e.animate({left:g},500,function(){e.hide()})}function l(){a(c.container).unbind("click",l);if(!DWZ.ui.sbar){e.animate({left:g},500,function(){e.hide()})}}return false});return false});a(c.toggleBut,d).click(function(){DWZ.ui.sbar=true;d.animate({left:-25},200,function(){e.show()});e.animate({left:5},800,function(){a(c.splitBar).show();a(c.toggleBut,e).show();var h=5+e.outerWidth()+a(c.splitBar).outerWidth();var g=a(c.container).outerWidth()-(h-a(c.container).cssv("left"));a(c.container).css({left:h,width:g});a(c.collapse,d).unbind("click");a(window).trigger("resizeGrid")});return false});a(c.splitBar).mousedown(function(g){a(c.splitBar2).each(function(){var h=a(this);setTimeout(function(){h.show()},100);h.css({visibility:"visible",left:a(c.splitBar).css("left")});h.jDrag(a.extend(b,{obj:a("#sidebar"),move:"horizontal",event:g,stop:function(){a(this).css("visibility","hidden");var j=a(this).cssv("left")-a(c.splitBar).cssv("left");var m=e.outerWidth()+j;var l=a(c.container).cssv("left")+j;var k=a(c.container).outerWidth()-j;e.css("width",m);a(c.splitBar).css("left",a(this).css("left"));a(c.container).css({left:l,width:k})}}));return false})})})}})(jQuery);(function(a){a.fn.extend({checkboxCtrl:function(b){return this.each(function(){var c=a(this);c.click(function(){var e=c.attr("group");if(c.is(":checkbox")){var d=c.is(":checked")?"all":"none";if(e){a.checkbox.select(e,d,b)}}else{if(e){a.checkbox.select(e,c.attr("selectType")||"all",b)}}})})}});a.checkbox={selectAll:function(b,c){this.select(b,"all",c)},unSelectAll:function(b,c){this.select(b,"none",c)},selectInvert:function(b,c){this.select(b,"invert",c)},select:function(b,c,d){$parent=a(d||document);$checkboxLi=$parent.find(":checkbox[name='"+b+"']");switch(c){case"invert":$checkboxLi.each(function(){$checkbox=a(this);$checkbox.attr("checked",!$checkbox.is(":checked"))});break;case"none":$checkboxLi.attr("checked",false);break;default:$checkboxLi.attr("checked",true);break}}}})(jQuery);